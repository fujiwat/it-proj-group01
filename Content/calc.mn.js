(function(n){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i of Object.getOwnPropertyNames(n))t[i]=n[i];return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},PrintObject:function(n){var t="{ ",i=!0;for(var r of Object.getOwnPropertyNames(n))i?i=!1:t+=", ",t+=r+" = "+n[r];return t+(i?"}":" }")},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.IntelliFactory.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ;b=a.calc=a.calc||{};c=b.Client=b.Client||{};d=a.WebSharper=a.WebSharper||{};e=d.Obj=d.Obj||{};f=d.UI=d.UI||{};g=f.HtmlModule=f.HtmlModule||{};h=g.attr=g.attr||{};i=d.Operators=d.Operators||{};j=d.Strings=d.Strings||{};k=d.Arrays=d.Arrays||{};l=f.Templating=f.Templating||{};m=l.Runtime=l.Runtime||{};n=m.Server=m.Server||{};o=n.TemplateInstance=n.TemplateInstance||{};p=n.ProviderBuilder=n.ProviderBuilder||{};q=d.Unchecked=d.Unchecked||{};r=a.calc_Templates=a.calc_Templates||{};s=d.Slice=d.Slice||{};t=f.AttrProxy=f.AttrProxy||{};u=d.Seq=d.Seq||{};v=f.Doc=f.Doc||{};w=f.Elt=f.Elt||{};x=d.JavaScript=d.JavaScript||{};y=x.Pervasives=x.Pervasives||{};z=f.AttrModule=f.AttrModule||{};A=a.System=a.System||{};B=A.Guid=A.Guid||{};C=d.Collections=d.Collections||{};D=C.List=C.List||{};E=n.Handler=n.Handler||{};F=f.Client=f.Client||{};G=F.Templates=F.Templates||{};H=f.Attrs=f.Attrs||{};I=f.DomUtility=f.DomUtility||{};J=d.Enumerator=d.Enumerator||{};K=f.View=f.View||{};L=C.Dictionary=C.Dictionary||{};M=C.HashSet=C.HashSet||{};N=n.TemplateInitializer=n.TemplateInitializer||{};O=f.Var$1=f.Var$1||{};P=a.EventTarget;Q=a.Node;R=x.JS=x.JS||{};S=f.Updates=f.Updates||{};T=f.Snap=f.Snap||{};U=d.Numeric=d.Numeric||{};V=a.Object;W=f.Var=f.Var||{};X=f.CheckedInput=f.CheckedInput||{};Y=C.DictionaryUtil=C.DictionaryUtil||{};Z=J.T=J.T||{};_0=f.ConcreteVar=f.ConcreteVar||{};_1=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};_2=a.WindowOrWorkerGlobalScope;_3=f.Docs=f.Docs||{};_4=f.Array=f.Array||{};_5=f.DocElemNode=f.DocElemNode||{};_6=a.CharacterData;_7=f.Abbrev=f.Abbrev||{};_8=_7.Fresh=_7.Fresh||{};_9=G.Prepare=G.Prepare||{};_=C.KeyCollection=C.KeyCollection||{};$=f.An=f.An||{};ba=F.Settings=F.Settings||{};bb=_7.Mailbox=_7.Mailbox||{};bc=d.List=d.List||{};bd=bc.T=bc.T||{};be=F.Attrs=F.Attrs||{};bf=be.Dyn=be.Dyn||{};bg=C.ValueCollection=C.ValueCollection||{};bh=F.Docs=F.Docs||{};bi=bh.RunState=bh.RunState||{};bj=bh.NodeSet=bh.NodeSet||{};bk=d.Concurrency=d.Concurrency||{};bl=f.Anims=f.Anims||{};bm=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bn=C.HashSetUtil=C.HashSetUtil||{};bo=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bp=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bq=f.BindVar=f.BindVar||{};br=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bs=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bt=f.AppendList=f.AppendList||{};bu=f.String=f.String||{};bv=f.DynamicAttrNode=f.DynamicAttrNode||{};bw=bk.Scheduler=bk.Scheduler||{};bx=f.Easing=f.Easing||{};by=bk.AsyncBody=bk.AsyncBody||{};bz=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bA=bk.CT=bk.CT||{};bB=_7.HashSet=_7.HashSet||{};bC=d.Char=d.Char||{};bD=d.CancellationTokenSource=d.CancellationTokenSource||{};bE=bh.DomNodes=bh.DomNodes||{};bF=a.Error;bG=d.OperationCanceledException=d.OperationCanceledException||{};bH=d.Lazy=d.Lazy||{};bI=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bJ=d.Queue=d.Queue||{};bK=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};bL=bK.LazyRecord=bK.LazyRecord||{};bM=a.Math;bN=a.IntelliFactory;bO=bN&&bN.Runtime;bP=a.console;bQ=a.Date;c.Main=function(){var bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2;function b3(cb){var cc,cd,ce;cc="";cd="";switch(cb){case"E":cd=cb;cc="0.";break;case"-":case"":cd="0.";cc="0.";break;default:cd=cb;cc=cb;break;}if(!j.exists(function(cf){return cf===".";},cd))cd=cd+".";bV=cd.length-1-cd.indexOf(".");bW.SetValue(cd);bT=+cc;}function b4(){if(bT===-a.Infinity||bT===a.Infinity||a.String(bT)==="NaN")b3("E");else{bT=bM.round(bT*bM.pow(10,10))/bM.pow(10,10);bU=a.String(bT);!j.exists(function(cb){return cb===".";},bU)?bU=bU+".":void 0;bV=bU.length-1-bU.indexOf(".");bW.SetValue(bU);}}function b5(cb,cc){bR!=null&&bR.$==1?(bT=(bR.$0(bS))(bT),b4()):void 0;bS=bT;bT=0;bV=0;bR={$:1,$0:cb};}function b6(cb,cc,cd){return v.Element("button",[t.Create("class",cc),z.Handler("click",function(){return function(){return cd();};})],[v.TextNode(cb)]);}function b7(cb){if(bV===0){bT=10*bT+cb;b4();}else{bU=bU+a.String(cb);b3(bU);}}function b8(cb){return b6(a.String(cb),"D",function(){b7(cb);});}function b9(cb,cc){return cb/cc;}function b_(cb,cc){return cb*cc;}function b$(cb,cc){return cb-cc;}function ca(cb,cc){return cb+cc;}bR=null;bS=0;bT=0;bU="";bV=0;bW=v.Element("input",[t.Create("type","text"),t.Create("value","0."),t.Create("readonly","")],[]);bX=v.Element("div",[],[bW,v.Element("br",[],[]),v.Element("div",[t.Create("style","padding: 10px 0px;")],[b6("\ud835\udf45","PI",function(){bT=bM.PI;b4();}),b6("Sin","SIN",function(){bT=bM.sin(bT);b4();}),b6("Cos","COS",function(){bT=bM.cos(bT);b4();}),b6("Tan","TAN",function(){bT=bM.tan(bT);b4();}),b6("\u232b","BS",function(){bU=s.string(bU,{$:1,$0:0},{$:1,$0:j.length(bU)-(bU[bU.length-1]==="."?3:2)});b3(bU);}),v.Element("br",[],[]),b6("+/-","N",function(){bT=-bT;bV=0;b4();}),b8(7),b8(8),b8(9),b6("รท","DIV",function(cb){return b5(function(cc){return function(cd){return b9(cc,cd);};},cb);}),v.Element("br",[],[]),b6("1/\ud835\udc65","I",function(){bT=1/bT;b4();}),b8(4),b8(5),b8(6),b6("ร","MUL",function(cb){return b5(function(cc){return function(cd){return b_(cc,cd);};},cb);}),v.Element("br",[],[]),b6("C","C",function(){bT=0;bV=0;b4();}),b8(1),b8(2),b8(3),b6("-","SUB",function(cb){return b5(function(cc){return function(cd){return b$(cc,cd);};},cb);}),v.Element("br",[],[]),b6("AC","AC",function(){bT=0;bV=0;bS=0;bR=null;b4();}),b8(0),b6(".","P",function(){if(bV===0){b4();bV=1;}}),b6("=","E",function(){if(bR!=null&&bR.$==1){bT=(bR.$0(bS))(bT);b4();bR=null;}}),b6("+","PLS",function(cb){return b5(function(cc){return function(cd){return ca(cc,cd);};},cb);})])]);bY=(bZ=(b0=new p.New$1(),(b0.h.push({$:0,$0:"main",$1:bX}),b0)),(b1=E.CompleteHoles(bZ.k,bZ.h,[]),(b2=new o.New(b1[1],r.main(b1[0])),bZ.i=b2,b2))).get_Doc();G.LoadLocalTemplates("");v.RunById("main",bY);};e=d.Obj=bO.Class({Equals:function(bR){return this===bR;},GetHashCode:function(){return -1;}},null,e);e.New=bO.Ctor(function(){},e);h=g.attr=bO.Class({},e,h);i.FailWith=function(bR){throw new bF(bR);};i.KeyValue=function(bR){return[bR.K,bR.V];};j.exists=function(bR,bS){return u.exists(bR,j.protect(bS));};j.length=function(bR){return j.protect(bR).length;};j.protect=function(bR){return bR===null?"":bR;};j.concat=function(bR,bS){return k.ofSeq(bS).join(bR);};j.SplitChars=function(bR,bS,bT){return j.Split(bR,new a.RegExp("["+j.RegexEscape(bS.join(""))+"]"),bT);};j.StartsWith=function(bR,bS){return bR.substring(0,bS.length)==bS;};j.Split=function(bR,bS,bT){return bT===1?k.filter(function(bU){return bU!=="";},j.SplitWith(bR,bS)):j.SplitWith(bR,bS);};j.RegexEscape=function(bR){return bR.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};j.SplitWith=function(bR,bS){return bR.split(bS);};j.forall=function(bR,bS){return u.forall(bR,j.protect(bS));};k.get=function(bR,bS){k.checkBounds(bR,bS);return bR[bS];};k.length=function(bR){return bR.dims===2?bR.length*bR.length:bR.length;};k.checkBounds=function(bR,bS){if(bS<0||bS>=bR.length)i.FailWith("Index was outside the bounds of the array.");};k.set=function(bR,bS,bT){k.checkBounds(bR,bS);bR[bS]=bT;};o=n.TemplateInstance=bO.Class({get_Doc:function(){return this.doc;}},e,o);o.New=bO.Ctor(function(bR,bS){e.New.call(this);this.doc=bS;this.allVars=bR.$==0?bR.$0:i.FailWith("Should not happen");},o);p=n.ProviderBuilder=bO.Class({},e,p);p.New$1=bO.Ctor(function(){var bR;e.New.call(this);this.i=null;this.k=(bR=B.NewGuid(),a.String(bR));this.h=[];bO.SetOptional(this,"s",null);},p);q.Equals=function(bR,bS){var bT,bU,bV,bW;if(bR===bS)return true;else{bT=typeof bR;if(bT=="object"){if(bR===null||bR===void 0||bS===null||bS===void 0||!q.Equals(typeof bS,"object"))return false;else if("Equals"in bR)return bR.Equals(bS);else if("Equals"in bS)return false;else if(bR instanceof a.Array&&bS instanceof a.Array)return q.arrayEquals(bR,bS);else if(bR instanceof a.Date&&bS instanceof a.Date)return q.dateEquals(bR,bS);else{bU=[true];for(var bX in bR)if(function(bY){bU[0]=!bR.hasOwnProperty(bY)||bS.hasOwnProperty(bY)&&q.Equals(bR[bY],bS[bY]);return!bU[0];}(bX))break;if(bU[0]){for(var bY in bS)if(function(bZ){bU[0]=!bS.hasOwnProperty(bZ)||bR.hasOwnProperty(bZ);return!bU[0];}(bY))break;}return bU[0];}}else return bT=="function"&&("$Func"in bR?bR.$Func===bS.$Func&&bR.$Target===bS.$Target:"$Invokes"in bR&&"$Invokes"in bS&&q.arrayEquals(bR.$Invokes,bS.$Invokes));}};q.arrayEquals=function(bR,bS){var bT,bU;if(k.length(bR)===k.length(bS)){bT=true;bU=0;while(bT&&bU<k.length(bR)){!q.Equals(k.get(bR,bU),k.get(bS,bU))?bT=false:void 0;bU=bU+1;}return bT;}else return false;};q.dateEquals=function(bR,bS){return bR.getTime()===bS.getTime();};q.Hash=function(bR){var bS;bS=typeof bR;return bS=="function"?0:bS=="boolean"?bR?1:0:bS=="number"?bR:bS=="string"?q.hashString(bR):bS=="object"?bR==null?0:bR instanceof a.Array?q.hashArray(bR):q.hashObject(bR):0;};q.hashString=function(bR){var bS,bT,bU;if(bR===null)return 0;else{bS=5381;for(bT=0,bU=bR.length-1;bT<=bU;bT++)bS=q.hashMix(bS,bR[bT].charCodeAt());return bS;}};q.hashArray=function(bR){var bS,bT,bU;bS=-34948909;for(bT=0,bU=k.length(bR)-1;bT<=bU;bT++)bS=q.hashMix(bS,q.Hash(k.get(bR,bT)));return bS;};q.hashObject=function(bR){var bS,bT;if("GetHashCode"in bR)return bR.GetHashCode();else{bS=[0];for(var bU in bR)if(function(bV){bS[0]=q.hashMix(q.hashMix(bS[0],q.hashString(bV)),q.Hash(bR[bV]));return false;}(bU))break;return bS[0];}};q.hashMix=function(bR,bS){return(bR<<5)+bR+bS;};q.Compare=function(bR,bS){var bT,bU,bV,bW,bX,bY;if(bR===bS)return 0;else{bU=typeof bR;switch(bU=="function"?1:bU=="boolean"?2:bU=="number"?2:bU=="string"?2:bU=="object"?3:0){case 0:return typeof bS=="undefined"?0:-1;case 1:return i.FailWith("Cannot compare function values.");case 2:return bR<bS?-1:1;case 3:if(bR===null)bV=-1;else if(bS===null)bV=1;else if("CompareTo"in bR)bV=bR.CompareTo(bS);else if("CompareTo0"in bR)bV=bR.CompareTo0(bS);else if(bR instanceof a.Array&&bS instanceof a.Array)bV=q.compareArrays(bR,bS);else if(bR instanceof a.Date&&bS instanceof a.Date)bV=q.compareDates(bR,bS);else{bW=[0];for(var bZ in bR)if(function(b0){return!bR.hasOwnProperty(b0)?false:!bS.hasOwnProperty(b0)?(bW[0]=1,true):(bW[0]=q.Compare(bR[b0],bS[b0]),bW[0]!==0);}(bZ))break;if(bW[0]===0){for(var b0 in bS)if(function(b1){return!bS.hasOwnProperty(b1)?false:!bR.hasOwnProperty(b1)&&(bW[0]=-1,true);}(b0))break;}bV=bW[0];}return bV;}}};q.compareArrays=function(bR,bS){var bT,bU;if(k.length(bR)<k.length(bS))return -1;else if(k.length(bR)>k.length(bS))return 1;else{bT=0;bU=0;while(bT===0&&bU<k.length(bR)){bT=q.Compare(k.get(bR,bU),k.get(bS,bU));bU=bU+1;}return bT;}};q.compareDates=function(bR,bS){return q.Compare(bR.getTime(),bS.getTime());};r.main=function(bR){G.LoadLocalTemplates("index");return bR?G.NamedTemplate("index",{$:1,$0:"main"},bR):void 0;};s.string=function(bR,bS,bT){var bU,bV;return bS==null?bT!=null&&bT.$==1?(bU=bT.$0,bU<0?"":bR.slice(0,bU+1)):"":bT==null?bR.slice(bS.$0):(bV=bT.$0,bV<0?"":bR.slice(bS.$0,bV+1));};t=f.AttrProxy=bO.Class({},null,t);t.Create=function(bR,bS){return H.Static(function(bT){bT.setAttribute(bR,bS);});};t.Concat=function(bR){var bS;bS=_4.ofSeqNonCopying(bR);return _4.TreeReduce(H.EmptyAttr(),t.Append,bS);};t.Append=function(bR,bS){return H.AppendTree(bR,bS);};t.Handler=function(bR,bS){return t.HandlerImpl(bR,bS);};t.HandlerImpl=function(bR,bS){return H.Static(function(bT){bT.addEventListener(bR,function(bU){return(bS(bT))(bU);},false);});};u.exists=function(bR,bS){var bT,bU;bT=J.Get(bS);try{bU=false;while(!bU&&bT.MoveNext())bU=bR(bT.Current());return bU;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}};u.append=function(bR,bS){return{GetEnumerator:function(){var bT,bU;bT=J.Get(bR);bU=[true];return new Z.New(bT,null,function(bV){var bW;return bV.s.MoveNext()?(bV.c=bV.s.Current(),true):(bW=bV.s,!q.Equals(bW,null)?bW.Dispose():void 0,bV.s=null,bU[0]&&(bU[0]=false,bV.s=J.Get(bS),bV.s.MoveNext()?(bV.c=bV.s.Current(),true):(bV.s.Dispose(),bV.s=null,false)));},function(bV){var bW;bW=bV.s;if(!q.Equals(bW,null))bW.Dispose();});}};};u.head=function(bR){var bS;bS=J.Get(bR);try{return bS.MoveNext()?bS.Current():u.insufficient();}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}};u.fold=function(bR,bS,bT){var bU,bV;bU=bS;bV=J.Get(bT);try{while(bV.MoveNext())bU=bR(bU,bV.Current());return bU;}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}};u.iter=function(bR,bS){var bT;bT=J.Get(bS);try{while(bT.MoveNext())bR(bT.Current());}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}};u.map=function(bR,bS){return{GetEnumerator:function(){var bT;bT=J.Get(bS);return new Z.New(null,null,function(bU){return bT.MoveNext()&&(bU.c=bR(bT.Current()),true);},function(){bT.Dispose();});}};};u.max=function(bR){var bS,bT,bU;bS=J.Get(bR);try{if(!bS.MoveNext())u.seqEmpty();bT=bS.Current();while(bS.MoveNext()){bU=bS.Current();if(q.Compare(bU,bT)===1)bT=bU;}return bT;}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}};u.forall=function(bR,bS){return!u.exists(function(bT){return!bR(bT);},bS);};u.seqEmpty=function(){return i.FailWith("The input sequence was empty.");};v=f.Doc=bO.Class({},e,v);v.TextNode=function(bR){return v.Mk({$:5,$0:self.document.createTextNode(bR)},K.Const());};v.RunById=function(bR,bS){var bT;bT=self.document.getElementById(bR);if(q.Equals(bT,null))i.FailWith("invalid id: "+bR);else v.Run(bT,bS);};v.Element=function(bR,bS,bT){var bU,bV;bU=t.Concat(bS);bV=v.Concat(bT);return w.New(self.document.createElement(bR),bU,bV);};v.Mk=function(bR,bS){return new v.New(bR,bS);};v.Run=function(bR,bS){_3.LinkElement(bR,bS.docNode);v.RunInPlace(false,bR,bS);};v.Concat=function(bR){var bS;bS=_4.ofSeqNonCopying(bR);return _4.TreeReduce(v.get_Empty(),v.Append,bS);};v.get_Empty=function(){return v.Mk(null,K.Const());};v.RunInPlace=function(bR,bS,bT){var bU;bU=_3.CreateRunState(bS,bT.docNode);K.Sink($.get_UseAnimations()||ba.BatchUpdatesEnabled()?bb.StartProcessor(_3.PerformAnimatedUpdate(bR,bU,bT.docNode)):function(){_3.PerformSyncUpdate(bR,bU,bT.docNode);},bT.updates);};v.Append=function(bR,bS){return v.Mk({$:0,$0:bR.docNode,$1:bS.docNode},K.Map2Unit(bR.updates,bS.updates));};v.TextView=function(bR){var bS;bS=_3.CreateTextNode();return v.Mk({$:4,$0:bS},K.Map(function(bT){_3.UpdateTextNode(bS,bT);},bR));};v.New=bO.Ctor(function(bR,bS){e.New.call(this);this.docNode=bR;this.updates=bS;},v);w=f.Elt=bO.Class({SetValue:function(bR){this.elt.value=bR;}},v,w);w.New=function(bR,bS,bT){var bU,bV;bU=_3.CreateElemNode(bR,bS,bT.docNode);bV=S.Create(bT.updates);return new w.New$1({$:1,$0:bU},K.Map2Unit(H.Updates(bU.Attr),bV.v),bR,bV);};w.TreeNode=function(bR,bS){var bT,bU;function bV(bW){return bW[1];}bT=S.Create(bS);return new w.New$1({$:6,$0:bR},K.Map2Unit((bU=k.map(function(bW){return H.Updates(bV(bW));},bR.Attrs),_4.TreeReduce(K.Const(),K.Map2Unit,bU)),bT.v),k.get(bR.Els,0),bT);};w.New$1=bO.Ctor(function(bR,bS,bT,bU){v.New.call(this,bR,bS);this.docNode$1=bR;this.updates$1=bS;this.elt=bT;this.rvUpdates=bU;},w);y.NewFromSeq=function(bR){var bS,bT,bU;bS={};bT=J.Get(bR);try{while(bT.MoveNext()){bU=bT.Current();bS[bU[0]]=bU[1];}}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}return bS;};z.Handler=function(bR,bS){return H.Static(function(bT){bT.addEventListener(bR,function(bU){return(bS(bT))(bU);},false);});};z.OnAfterRender=function(bR){return new t({$:4,$0:bR});};z.Value=function(bR){return z.ValueWith(bq.StringApply(),bR);};z.Checked=function(bR){return z.ValueWith(bq.BoolCheckedApply(),bR);};z.IntValue=function(bR){return z.ValueWith(bq.IntApplyChecked(),bR);};z.IntValueUnchecked=function(bR){return z.ValueWith(bq.IntApplyUnchecked(),bR);};z.FloatValue=function(bR){return z.ValueWith(bq.FloatApplyChecked(),bR);};z.FloatValueUnchecked=function(bR){return z.ValueWith(bq.FloatApplyUnchecked(),bR);};z.Dynamic=function(bR,bS){return H.Dynamic(bS,function(bT){return function(bU){return bT.setAttribute(bR,bU);};});};z.ValueWith=function(bR,bS){var bT;bT=bR(bS);return t.Append(H.Static(bT[0]),z.DynamicCustom(bT[1],bT[2]));};z.DynamicCustom=function(bR,bS){return H.Dynamic(bS,bR);};B.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bR){var bS,bT;bS=bM.random()*16|0;bT=bR=="x"?bS:bS&3|8;return bT.toString(16);});};D=C.List=bO.Class({GetEnumerator:function(){return J.Get(this);},GetEnumerator0:function(){return J.Get0(this);}},null,D);E.CompleteHoles=function(bR,bS,bT){var bV,bW,bX,bY,bZ;function bU(b0,b1){var b2;return bW.Contains(b0)?null:(b2=q.Equals(b1,0)?N.GetOrAddHoleFor(bR,b0,function(){return{$:8,$0:b0,$1:O.Create$1("")};}):q.Equals(b1,1)?N.GetOrAddHoleFor(bR,b0,function(){return{$:13,$0:b0,$1:O.Create$1(0)};}):q.Equals(b1,2)?N.GetOrAddHoleFor(bR,b0,function(){return{$:9,$0:b0,$1:O.Create$1(false)};}):i.FailWith("Invalid value type"),(bV.set_Item(b0,b2),{$:1,$0:b2}));}bV=new L.New$5();bW=new M.New$3();bX=J.Get(bS);try{while(bX.MoveNext()){bY=bX.Current();bZ=bY.$0;bW.Add(bZ);bV.set_Item(bZ,bY);}}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}return[u.append(bS,k.choose(function(b0){return bU(b0[0],b0[1]);},bT)),{$:0,$0:bV}];};G.LoadLocalTemplates=function(bR){!G.LocalTemplatesLoaded()?(G.set_LocalTemplatesLoaded(true),G.LoadNestedTemplates(self.document.body,"")):void 0;G.LoadedTemplates().set_Item(bR,G.LoadedTemplateFile(""));};G.NamedTemplate=function(bR,bS,bT){var bU,bV;bU=(bV=null,[G.LoadedTemplateFile(bR).TryGetValue(bS==null?"":bS.$0,{get:function(){return bV;},set:function(bW){bV=bW;}}),bV]);return bU[0]?G.ChildrenTemplate(bU[1].cloneNode(true),bT):(bP.warn("Local template doesn't exist",bS),v.get_Empty());};G.LocalTemplatesLoaded=function(){_1.$cctor();return _1.LocalTemplatesLoaded;};G.set_LocalTemplatesLoaded=function(bR){_1.$cctor();_1.LocalTemplatesLoaded=bR;};G.LoadNestedTemplates=function(bR,bS){var bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6;function bT(b7){var b8,b9;if(!bU.ContainsKey(b7)){b8=(b9=null,[bV.TryGetValue(b7,{get:function(){return b9;},set:function(b_){b9=b_;}}),b9]);if(b8[0]){b6.Add(b7);bV.Remove(b7);G.PrepareTemplateStrict(bS,{$:1,$0:b7},b8[1],{$:1,$0:bT});}else bP.warn(b6.Contains(b7)?"Encountered loop when instantiating "+b7:"Local template does not exist: "+b7);}}bU=G.LoadedTemplateFile(bS);bV=new L.New$5();bW=bR.querySelectorAll("[ws-template]");for(bX=0,bY=bW.length-1;bX<=bY;bX++){bZ=bW[bX];b0=bZ.getAttribute("ws-template").toLowerCase();bZ.removeAttribute("ws-template");bV.set_Item(b0,G.FakeRootSingle(bZ));}b1=bR.querySelectorAll("[ws-children-template]");for(b2=0,b3=b1.length-1;b2<=b3;b2++){b4=b1[b2];b5=b4.getAttribute("ws-children-template").toLowerCase();b4.removeAttribute("ws-children-template");bV.set_Item(b5,G.FakeRoot(b4));}b6=new M.New$3();while(bV.count>0)bT(u.head(bV.get_Keys()));};G.LoadedTemplates=function(){_1.$cctor();return _1.LoadedTemplates;};G.LoadedTemplateFile=function(bR){var bS,bT,bU;bS=(bT=null,[G.LoadedTemplates().TryGetValue(bR,{get:function(){return bT;},set:function(bV){bT=bV;}}),bT]);return bS[0]?bS[1]:(bU=new L.New$5(),(G.LoadedTemplates().set_Item(bR,bU),bU));};G.ChildrenTemplate=function(bR,bS){var bT,bU,bV,bW,bX;bT=G.InlineTemplate(bR,u.append(bS,G.GlobalHoles().get_Values()));bU=bT[1];bV=bT[0];bW=bV.Els;return!q.Equals(bW,null)&&bW.length===1&&(k.get(bW,0)instanceof Q&&(q.Equals(k.get(bW,0).nodeType,Q.ELEMENT_NODE)&&(bX=k.get(bW,0),true)))?w.TreeNode(bV,bU):v.Mk({$:6,$0:bV},bU);};G.FakeRootSingle=function(bR){var bS,bT,bU,bV;bR.removeAttribute("ws-template");bS=bR.getAttribute("ws-replace");if(bS===null);else{bR.removeAttribute("ws-replace");bT=bR.parentNode;q.Equals(bT,null)?void 0:(bU=self.document.createElement(bR.tagName),bU.setAttribute("ws-replace",bS),bT.replaceChild(bU,bR));}bV=self.document.createElement("div");bV.appendChild(bR);return bV;};G.FakeRoot=function(bR){var bS;bS=self.document.createElement("div");while(bR.hasChildNodes())bS.appendChild(bR.firstChild);return bS;};G.PrepareTemplateStrict=function(bR,bS,bT,bU){var bV;function bW(b2,b3){var b4,b5,b6,b7,b8,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs;function b9(ct){}while(true)switch(b2){case 0:if(b3!==null){b4=b3.nextSibling;if(q.Equals(b3.nodeType,Q.TEXT_NODE))_9.convertTextNode(b3);else if(q.Equals(b3.nodeType,Q.ELEMENT_NODE))bY(b3);b3=b4;}else return null;break;case 1:b_=s.string(b3.nodeName,{$:1,$0:3},null).toLowerCase();b$=(b5=b_.indexOf("."),b5===-1?[bR,b_]:[s.string(b_,null,{$:1,$0:b5-1}),s.string(b_,{$:1,$0:b5+1},null)]);ca=b$[1];cb=b$[0];if(cb!==""&&!G.LoadedTemplates().ContainsKey(cb))return _9.failNotLoaded(ca);else{if(cb===""&&bU!=null)bU.$0(ca);cc=G.LoadedTemplates().get_Item(cb);if(!cc.ContainsKey(ca))return _9.failNotLoaded(ca);else{cd=cc.get_Item(ca);ce=cd.cloneNode(true);cf=new M.New$3();cg=new L.New$5();ch=b3.attributes;for(ci=0,cj=ch.length-1;ci<=cj;ci++){ck=ch.item(ci).name.toLowerCase();cg.set_Item(ck,(cl=ch.item(ci).nodeValue,cl===""?ck:cl.toLowerCase()));if(!cf.Add(ck))bP.warn("Hole mapped twice",ck);}for(cm=0,cn=b3.childNodes.length-1;cm<=cn;cm++){co=b3.childNodes[cm];if(q.Equals(co.nodeType,Q.ELEMENT_NODE))!cf.Add(co.nodeName.toLowerCase())?bP.warn("Hole filled twice",ca):void 0;}cp=b3.childNodes.length===1&&q.Equals(b3.firstChild.nodeType,Q.TEXT_NODE);if(cp){b7=_9.fillTextHole(ce,b3.firstChild.textContent,ca);((function(ct){return function(cu){if(cu!=null)ct(cu.$0);};}((b8=function(ct){return function(cu){return ct.Add(cu);};}(cf),function(ct){return b9(b8(ct));})))(b7));}_9.removeHolesExcept(ce,cf);if(!cp){for(cq=0,cr=b3.childNodes.length-1;cq<=cr;cq++){cs=b3.childNodes[cq];if(q.Equals(cs.nodeType,Q.ELEMENT_NODE))cs.hasAttributes()?_9.fillInstanceAttrs(ce,cs):bX(ce,cs);}}_9.mapHoles(ce,cg);_9.fill(ce,b3.parentNode,b3);b3.parentNode.removeChild(b3);return;}}break;}}function bX(b2,b3){var b4,b6,b7;function b5(b8,b9){var b_;if(b6==="title"&&b3.hasChildNodes()){b_=I.ParseHTMLIntoFakeRoot(b3.textContent);b3.removeChild(b3.firstChild);while(b_.hasChildNodes())b3.appendChild(b_.firstChild);}else null;bY(b3);return _9.fill(b3,b8,b9);}b6=b3.nodeName.toLowerCase();G.foreachNotPreserved(b2,"[ws-attr-holes]",function(b8){var b9,b_,b$,ca,cb;b9=j.SplitChars(b8.getAttribute("ws-attr-holes"),[" "],1);for(b_=0,b$=b9.length-1;b_<=b$;b_++){ca=k.get(b9,b_);b8.setAttribute(ca,(cb=new a.RegExp("\\${"+b6+"}","ig"),b8.getAttribute(ca).replace(cb,b3.textContent)));}});b7=b2.querySelector("[ws-hole="+b6+"]");if(q.Equals(b7,null)){b4=b2.querySelector("[ws-replace="+b6+"]");return q.Equals(b4,null)?null:(b5(b4.parentNode,b4),void b4.parentNode.removeChild(b4));}else{while(b7.hasChildNodes())b7.removeChild(b7.lastChild);b7.removeAttribute("ws-hole");return b5(b7,null);}}function bY(b2){if(!b2.hasAttribute("ws-preserve"))if(j.StartsWith(b2.nodeName.toLowerCase(),"ws-"))b0(b2);else{_9.convertAttrs(b2);bZ(b2.firstChild);}}function bZ(b2){return bW(0,b2);}function b0(b2){return bW(1,b2);}function b1(b2){var b3,b4,b5,b6;while(true){b3=b2.querySelector("[ws-template]");if(q.Equals(b3,null)){b4=b2.querySelector("[ws-children-template]");if(q.Equals(b4,null))return null;else{b5=b4.getAttribute("ws-children-template");b4.removeAttribute("ws-children-template");G.PrepareTemplateStrict(bR,{$:1,$0:b5},b4,null);b2=b2;}}else{b6=b3.getAttribute("ws-template");(G.PrepareSingleTemplate(bR,{$:1,$0:b6},b3))(null);b2=b2;}}}bV=(bS==null?"":bS.$0).toLowerCase();G.LoadedTemplateFile(bR).set_Item(bV,bT);if(bT.hasChildNodes()){b1(bT);bZ(bT.firstChild);}};G.InlineTemplate=function(bR,bS){var bT,bU,bV,bW,bZ,b0,b1,b2,b3,b4,b5;function bX(b6,b7){var b8,b9,b_;b8=H.Insert(b6,b7);b0.push(H.Updates(b8));b1.push([b6,b8]);b9=bO.GetOptional(b8.OnAfterRender);return b9==null?null:(b_=b9.$0,void b2.push(function(){b_(b6);}));}function bY(b6){var b7,b8;b7=(b8=null,[b3.TryGetValue(b6,{get:function(){return b8;},set:function(b9){b8=b9;}}),b8]);return b7[0]?b7[1].$==0?{$:1,$0:b7[1].$1}:b7[1].$==1?{$:1,$0:v.TextNode(b7[1].$1)}:b7[1].$==2?{$:1,$0:v.TextView(b7[1].$1)}:b7[1].$==8?{$:1,$0:v.TextView(b7[1].$1.get_View())}:b7[1].$==9?{$:1,$0:v.TextView(K.Map(a.String,b7[1].$1.get_View()))}:b7[1].$==10?{$:1,$0:v.TextView(K.Map(function(b9){return b9.get_Input();},b7[1].$1.get_View()))}:b7[1].$==11?{$:1,$0:v.TextView(K.Map(a.String,b7[1].$1.get_View()))}:b7[1].$==12?{$:1,$0:v.TextView(K.Map(function(b9){return b9.get_Input();},b7[1].$1.get_View()))}:b7[1].$==13?{$:1,$0:v.TextView(K.Map(a.String,b7[1].$1.get_View()))}:(bP.warn("Content hole filled with attribute data",b6),null):null;}bZ=[];b0=[];b1=[];b2=[];b3=new L.New$5();b4=J.Get(bS);try{while(b4.MoveNext()){b5=b4.Current();b3.set_Item(b5.$0,b5);}}finally{if(typeof b4=="object"&&"Dispose"in b4)b4.Dispose();}bT=I.ChildrenArray(bR);G.foreachNotPreserved(bR,"[ws-hole]",function(b6){var b7,b8,b9;b9=b6.getAttribute("ws-hole");b6.removeAttribute("ws-hole");while(b6.hasChildNodes())b6.removeChild(b6.lastChild);b7=bY(b9);if(b7!=null&&b7.$==1){b8=b7.$0;_3.LinkElement(b6,b8.docNode);bZ.push(_5.New(H.Empty(b6),b8.docNode,null,b6,_8.Int(),null));b0.push(b8.updates);}});G.foreachNotPreserved(bR,"[ws-replace]",function(b6){var b7,b8,b9,b_,b$,ca;b7=bY(b6.getAttribute("ws-replace"));if(b7!=null&&b7.$==1){b8=b7.$0;b9=b6.parentNode;b_=self.document.createTextNode("");b9.replaceChild(b_,b6);b$=_3.InsertBeforeDelim(b_,b8.docNode);ca=k.tryFindIndex(function(cb){return b6===cb;},bT);ca==null?void 0:k.set(bT,ca.$0,b8.docNode);bZ.push(_5.New(H.Empty(b9),b8.docNode,{$:1,$0:[b$,b_]},b9,_8.Int(),null));b0.push(b8.updates);}});G.foreachNotPreserved(bR,"[ws-attr]",function(b6){var b7,b8,b9;b7=b6.getAttribute("ws-attr");b6.removeAttribute("ws-attr");b8=(b9=null,[b3.TryGetValue(b7,{get:function(){return b9;},set:function(b_){b9=b_;}}),b9]);if(b8[0])b8[1].$==3?bX(b6,b8[1].$1):bP.warn("Attribute hole filled with non-attribute data",b7);});G.foreachNotPreserved(bR,"[ws-on]",function(b6){bX(b6,t.Concat(k.choose(function(b7){var b8,b9,b_;b8=j.SplitChars(b7,[":"],1);b9=(b_=null,[b3.TryGetValue(k.get(b8,1),{get:function(){return b_;},set:function(b$){b_=b$;}}),b_]);return b9[0]?b9[1].$==4?{$:1,$0:z.Handler(k.get(b8,0),b9[1].$1)}:b9[1].$==5?{$:1,$0:t.Handler(k.get(b8,0),b9[1].$1)}:(bP.warn("Event hole on"+k.get(b8,0)+" filled with non-event data",k.get(b8,1)),null):null;},j.SplitChars(b6.getAttribute("ws-on"),[" "],1))));b6.removeAttribute("ws-on");});G.foreachNotPreserved(bR,"[ws-onafterrender]",function(b6){var b7,b8,b9;b7=b6.getAttribute("ws-onafterrender");b8=(b9=null,[b3.TryGetValue(b7,{get:function(){return b9;},set:function(b_){b9=b_;}}),b9]);if(b8[0])b8[1].$==6?(b6.removeAttribute("ws-onafterrender"),bX(b6,z.OnAfterRender(b8[1].$1))):b8[1].$==7?(b6.removeAttribute("ws-onafterrender"),bX(b6,z.OnAfterRender(b8[1].$1))):bP.warn("onafterrender hole filled with non-onafterrender data",b7);});G.foreachNotPreserved(bR,"[ws-var]",function(b6){var b7,b8,b9;b7=b6.getAttribute("ws-var");b6.removeAttribute("ws-var");b8=(b9=null,[b3.TryGetValue(b7,{get:function(){return b9;},set:function(b_){b9=b_;}}),b9]);if(b8[0])b8[1].$==8?bX(b6,z.Value(b8[1].$1)):b8[1].$==9?bX(b6,z.Checked(b8[1].$1)):b8[1].$==10?bX(b6,z.IntValue(b8[1].$1)):b8[1].$==11?bX(b6,z.IntValueUnchecked(b8[1].$1)):b8[1].$==12?bX(b6,z.FloatValue(b8[1].$1)):b8[1].$==13?bX(b6,z.FloatValueUnchecked(b8[1].$1)):bP.warn("Var hole filled with non-Var data",b7);});G.foreachNotPreserved(bR,"[ws-attr-holes]",function(b6){var b7,b8,b9,b_;b7=new a.RegExp(G.TextHoleRE(),"g");b8=j.SplitChars(b6.getAttribute("ws-attr-holes"),[" "],1);b6.removeAttribute("ws-attr-holes");for(b9=0,b_=b8.length-1;b9<=b_;b9++)(function(){var b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl;ci=k.get(b8,b9);cj=b6.getAttribute(ci);b$=null;ca=0;ck=[];while(b$=b7.exec(cj),b$!==null){cl=s.string(cj,{$:1,$0:ca},{$:1,$0:b7.lastIndex-k.get(b$,0).length-1});ca=b7.lastIndex;ck.push([cl,k.get(b$,1)]);}cc=s.string(cj,{$:1,$0:ca},null);b7.lastIndex=0;cd=k.foldBack(function(cm,cn){return(function(co){var cp,cq;cp=co[0];cq=co[1];return function(cr){var cs,ct,cu,cv,cw;cs=cr[0];ct=cr[1];cu=(cv=(cw=null,[b3.TryGetValue(cq,{get:function(){return cw;},set:function(cx){cw=cx;}}),cw]),cv[0]?cv[1].$==1?{$:0,$0:cv[1].$1}:cv[1].$==2?{$:1,$0:cv[1].$1}:cv[1].$==8?{$:1,$0:cv[1].$1.get_View()}:cv[1].$==9?{$:1,$0:K.Map(a.String,cv[1].$1.get_View())}:cv[1].$==10?{$:1,$0:K.Map(function(cx){return cx.get_Input();},cv[1].$1.get_View())}:cv[1].$==11?{$:1,$0:K.Map(a.String,cv[1].$1.get_View())}:cv[1].$==12?{$:1,$0:K.Map(function(cx){return cx.get_Input();},cv[1].$1.get_View())}:cv[1].$==13?{$:1,$0:K.Map(a.String,cv[1].$1.get_View())}:(bP.warn("Attribute value hole filled with non-text data",cq),{$:0,$0:""}):{$:0,$0:""});return cu.$==1?[cp,new bd({$:1,$0:cs===""?cu.$0:K.Map(function(cx){return cx+cs;},cu.$0),$1:ct})]:[cp+cu.$0+cs,ct];};}(cm))(cn);},ck,[cc,bd.Empty]);return bX(b6,cd[1].$==1?cd[1].$1.$==1?cd[1].$1.$1.$==1?cd[1].$1.$1.$1.$==0?(ce=cd[0],z.Dynamic(ci,K.Map3(function(cm,cn,co){return ce+cm+cn+co;},cd[1].$0,cd[1].$1.$0,cd[1].$1.$1.$0))):(cf=cd[0],z.Dynamic(ci,K.Map(function(cm){return cf+j.concat("",cm);},K.Sequence(cd[1])))):(cg=cd[0],z.Dynamic(ci,K.Map2(function(cm,cn){return cg+cm+cn;},cd[1].$0,cd[1].$1.$0))):cd[0]===""?z.Dynamic(ci,cd[1].$0):(ch=cd[0],z.Dynamic(ci,K.Map(function(cm){return ch+cm;},cd[1].$0))):t.Create(ci,cd[0]));}());});return[bO.DeleteEmptyFields({Els:bT,Dirty:true,Holes:bZ,Attrs:b1,Render:(bU=b2.length==0?null:{$:1,$0:function(b6){k.iter(function(b7){b7(b6);},b2);}},bU?bU.$0:void 0),El:(bV=!q.Equals(bT,null)&&bT.length===1&&(k.get(bT,0)instanceof Q&&(k.get(bT,0)instanceof a.Element&&(bW=k.get(bT,0),true)))?{$:1,$0:bW}:null,bV?bV.$0:void 0)},["Render","El"]),_4.TreeReduce(K.Const(),K.Map2Unit,b0)];};G.GlobalHoles=function(){_1.$cctor();return _1.GlobalHoles;};G.foreachNotPreserved=function(bR,bS,bT){I.IterSelector(bR,bS,function(bU){if(bU.closest("[ws-preserve]")==null)bT(bU);});};G.PrepareSingleTemplate=function(bR,bS,bT){var bU;bU=G.FakeRootSingle(bT);return function(bV){G.PrepareTemplateStrict(bR,bS,bU,bV);};};G.TextHoleRE=function(){_1.$cctor();return _1.TextHoleRE;};H.Static=function(bR){return new t({$:3,$0:bR});};H.Updates=function(bR){return _4.MapTreeReduce(function(bS){return bS.NChanged();},K.Const(),K.Map2Unit,bR.DynNodes);};H.AppendTree=function(bR,bS){var bT;return bR===null?bS:bS===null?bR:(bT=new t({$:2,$0:bR,$1:bS}),(H.SetFlags(bT,H.Flags(bR)|H.Flags(bS)),bT));};H.EmptyAttr=function(){bo.$cctor();return bo.EmptyAttr;};H.Insert=function(bR,bS){var bT,bU,bV;function bW(bX){var bY,bZ;while(true)if(!(bX===null)){if(bX!=null&&bX.$==1)return bT.push(bX.$0);else if(bX!=null&&bX.$==2){bY=bX.$1;bZ=bX.$0;bW(bZ);bX=bY;}else return bX!=null&&bX.$==3?bX.$0(bR):bX!=null&&bX.$==4?bU.push(bX.$0):null;}else return null;}bT=[];bU=[];bW(bS);bV=bT.slice(0);return bf.New(bR,H.Flags(bS),bV,bU.length===0?null:{$:1,$0:function(bX){u.iter(function(bY){bY(bX);},bU);}});};H.Empty=function(bR){return bf.New(bR,0,[],null);};H.SetFlags=function(bR,bS){bR.flags=bS;};H.Flags=function(bR){return bR!==null&&bR.hasOwnProperty("flags")?bR.flags:0;};H.Dynamic=function(bR,bS){return new t({$:1,$0:new bv.New(bR,bS)});};H.HasExitAnim=function(bR){var bS;bS=2;return(bR.DynFlags&bS)===bS;};H.GetExitAnim=function(bR){return H.GetAnim(bR,function(bS,bT){return bS.NGetExitAnim(bT);});};H.HasEnterAnim=function(bR){var bS;bS=1;return(bR.DynFlags&bS)===bS;};H.GetEnterAnim=function(bR){return H.GetAnim(bR,function(bS,bT){return bS.NGetEnterAnim(bT);});};H.HasChangeAnim=function(bR){var bS;bS=4;return(bR.DynFlags&bS)===bS;};H.GetChangeAnim=function(bR){return H.GetAnim(bR,function(bS,bT){return bS.NGetChangeAnim(bT);});};H.GetAnim=function(bR,bS){return $.Concat(k.map(function(bT){return bS(bT,bR.DynElem);},bR.DynNodes));};H.Sync=function(bR,bS){k.iter(function(bT){bT.NSync(bR);},bS.DynNodes);};I.ParseHTMLIntoFakeRoot=function(bR){var bS,bT,bU,bV,bW;function bX(bY,bZ){var b0;while(true)if(bZ===0)return bY;else{b0=bZ;bY=bY.lastChild;bZ=b0-1;}}bS=self.document.createElement("div");return!I.rhtml().test(bR)?(bS.appendChild(self.document.createTextNode(bR)),bS):(bT=(bU=I.rtagName().exec(bR),q.Equals(bU,null)?"":k.get(bU,1).toLowerCase()),(bV=(bW=(I.wrapMap())[bT],bW?bW:I.defaultWrap()),(bS.innerHTML=bV[1]+bR.replace(I.rxhtmlTag(),"<$1></$2>")+bV[2],bX(bS,bV[0]))));};I.ChildrenArray=function(bR){var bS,bT,bU;bS=[];for(bT=0,bU=bR.childNodes.length-1;bT<=bU;bT++)bS.push(bR.childNodes[bT]);return bS;};I.rhtml=function(){br.$cctor();return br.rhtml;};I.wrapMap=function(){br.$cctor();return br.wrapMap;};I.defaultWrap=function(){br.$cctor();return br.defaultWrap;};I.rxhtmlTag=function(){br.$cctor();return br.rxhtmlTag;};I.rtagName=function(){br.$cctor();return br.rtagName;};I.IterSelector=function(bR,bS,bT){var bU,bV,bW;bU=bR.querySelectorAll(bS);for(bV=0,bW=bU.length-1;bV<=bW;bV++)bT(bU[bV]);};I.InsertAt=function(bR,bS,bT){var bU;if(!(bT.parentNode===bR&&bS===(bU=bT.nextSibling,q.Equals(bU,null)?null:bU)))bR.insertBefore(bT,bS);};I.RemoveNode=function(bR,bS){if(bS.parentNode===bR)bR.removeChild(bS);};J.Get=function(bR){return bR instanceof a.Array?J.ArrayEnumerator(bR):q.Equals(typeof bR,"string")?J.StringEnumerator(bR):bR.GetEnumerator();};J.ArrayEnumerator=function(bR){return new Z.New(0,null,function(bS){var bT;bT=bS.s;return bT<k.length(bR)&&(bS.c=k.get(bR,bT),bS.s=bT+1,true);},void 0);};J.StringEnumerator=function(bR){return new Z.New(0,null,function(bS){var bT;bT=bS.s;return bT<bR.length&&(bS.c=bR[bT],bS.s=bT+1,true);},void 0);};J.Get0=function(bR){return bR instanceof a.Array?J.ArrayEnumerator(bR):q.Equals(typeof bR,"string")?J.StringEnumerator(bR):"GetEnumerator0"in bR?bR.GetEnumerator0():bR.GetEnumerator();};K.Const=function(bR){var bS;bS=T.New({$:0,$0:bR});return function(){return bS;};};K.Sink=function(bR,bS){function bT(){T.WhenRun(bS(),bR,function(){bk.scheduler().Fork(bT);});}bk.scheduler().Fork(bT);};K.Map2Unit=function(bR,bS){return K.CreateLazy(function(){return T.Map2Unit(bR(),bS());});};K.Map=function(bR,bS){return K.CreateLazy(function(){return T.Map(bR,bS());});};K.Map3=function(bR,bS,bT,bU){return K.CreateLazy(function(){return T.Map3(bR,bS(),bT(),bU());});};K.Sequence=function(bR){return K.CreateLazy(function(){return T.Sequence(u.map(function(bS){return bS();},bR));});};K.Map2=function(bR,bS,bT){return K.CreateLazy(function(){return T.Map2(bR,bS(),bT());});};K.CreateLazy=function(bR){var bS;bS={c:null,o:bR};return function(){var bT,bU;bT=bS.c;return bT===null?(bT=bS.o(),bS.c=bT,(bU=bT.s,bU!=null&&bU.$==0)?bS.o=null:T.WhenObsoleteRun(bT,function(){bS.c=null;}),bT):bT;};};L=C.Dictionary=bO.Class({set_Item:function(bR,bS){this.set(bR,bS);},set:function(bR,bS){var bT,bU,bV,bW;bT=this;bU=this.hash(bR);bV=this.data[bU];if(bV==null){this.count=this.count+1;this.data[bU]=new a.Array({K:bR,V:bS});}else{bW=k.tryFindIndex(function(bX){return bT.equals.apply(null,[(i.KeyValue(bX))[0],bR]);},bV);bW==null?(this.count=this.count+1,bV.push({K:bR,V:bS})):bV[bW.$0]={K:bR,V:bS};}},TryGetValue:function(bR,bS){var bT,bU,bV;bT=this;bU=this.data[this.hash(bR)];return bU==null?false:(bV=k.tryPick(function(bW){var bX;bX=i.KeyValue(bW);return bT.equals.apply(null,[bX[0],bR])?{$:1,$0:bX[1]}:null;},bU),bV!=null&&bV.$==1&&(bS.set(bV.$0),true));},ContainsKey:function(bR){var bS,bT;bS=this;bT=this.data[this.hash(bR)];return bT==null?false:k.exists(function(bU){return bS.equals.apply(null,[(i.KeyValue(bU))[0],bR]);},bT);},Remove:function(bR){return this.remove(bR);},get_Keys:function(){return new _.New(this);},get_Values:function(){return new bg.New(this);},remove:function(bR){var bS,bT,bU,bV;bS=this;bT=this.hash(bR);bU=this.data[bT];return bU==null?false:(bV=k.filter(function(bW){return!bS.equals.apply(null,[(i.KeyValue(bW))[0],bR]);},bU),k.length(bV)<bU.length&&(this.count=this.count-1,this.data[bT]=bV,true));},get_Item:function(bR){return this.get(bR);},get:function(bR){var bS,bT;bS=this;bT=this.data[this.hash(bR)];return bT==null?Y.notPresent():k.pick(function(bU){var bV;bV=i.KeyValue(bU);return bS.equals.apply(null,[bV[0],bR])?{$:1,$0:bV[1]}:null;},bT);},GetEnumerator:function(){return J.Get0(this);},GetEnumerator0:function(){return J.Get0(k.concat(R.GetFieldValues(this.data)));}},e,L);L.New$5=bO.Ctor(function(){L.New$6.call(this,[],q.Equals,q.Hash);},L);L.New$6=bO.Ctor(function(bR,bS,bT){var bU,bV;e.New.call(this);this.equals=bS;this.hash=bT;this.count=0;this.data=[];bU=J.Get(bR);try{while(bU.MoveNext()){bV=bU.Current();this.set(bV.K,bV.V);}}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}},L);M=C.HashSet=bO.Class({Add:function(bR){return this.add(bR);},Contains:function(bR){var bS;bS=this.data[this.hash(bR)];return bS==null?false:this.arrContains(bR,bS);},add:function(bR){var bS,bT;bS=this.hash(bR);bT=this.data[bS];return bT==null?(this.data[bS]=[bR],this.count=this.count+1,true):this.arrContains(bR,bT)?false:(bT.push(bR),this.count=this.count+1,true);},arrContains:function(bR,bS){var bT,bU,bV,bW;bT=true;bU=0;bW=bS.length;while(bT&&bU<bW)if(this.equals.apply(null,[bS[bU],bR]))bT=false;else bU=bU+1;return!bT;},ExceptWith:function(bR){var bS;bS=J.Get(bR);try{while(bS.MoveNext())this.Remove(bS.Current());}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bR){var bS,bT,bU,bV;bS=0;bT=bn.concat(this.data);for(bU=0,bV=bT.length-1;bU<=bV;bU++)k.set(bR,bU,bT[bU]);},IntersectWith:function(bR){var bS,bT,bU,bV,bW;bS=new M.New$4(bR,this.equals,this.hash);bT=bn.concat(this.data);for(bU=0,bV=bT.length-1;bU<=bV;bU++){bW=bT[bU];if(!bS.Contains(bW))this.Remove(bW);}},Remove:function(bR){var bS;bS=this.data[this.hash(bR)];return bS==null?false:this.arrRemove(bR,bS)&&(this.count=this.count-1,true);},arrRemove:function(bR,bS){var bT,bU,bV,bW;bT=true;bU=0;bW=bS.length;while(bT&&bU<bW)if(this.equals.apply(null,[bS[bU],bR])){bS.splice.apply(bS,[bU,1]);bT=false;}else bU=bU+1;return!bT;},GetEnumerator:function(){return J.Get(bn.concat(this.data));},GetEnumerator0:function(){return J.Get(bn.concat(this.data));}},e,M);M.New$3=bO.Ctor(function(){M.New$4.call(this,[],q.Equals,q.Hash);},M);M.New$4=bO.Ctor(function(bR,bS,bT){var bU;e.New.call(this);this.equals=bS;this.hash=bT;this.data=[];this.count=0;bU=J.Get(bR);try{while(bU.MoveNext())this.add(bU.Current());}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}},M);M.New$2=bO.Ctor(function(bR){M.New$4.call(this,bR,q.Equals,q.Hash);},M);k.choose=function(bR,bS){var bT,bU,bV,bW;bT=[];for(bU=0,bV=bS.length-1;bU<=bV;bU++){bW=bR(bS[bU]);if(bW==null);else bT.push(bW.$0);}return bT;};k.tryFindIndex=function(bR,bS){var bT,bU;bT=null;bU=0;while(bU<bS.length&&bT==null){bR(bS[bU])?bT={$:1,$0:bU}:void 0;bU=bU+1;}return bT;};k.tryPick=function(bR,bS){var bT,bU,bV;bT=null;bU=0;while(bU<bS.length&&bT==null){bV=bR(bS[bU]);if(bV!=null&&bV.$==1)bT=bV;bU=bU+1;}return bT;};k.exists=function(bR,bS){var bT,bU,bV,bW;bT=false;bU=0;bW=k.length(bS);while(!bT&&bU<bW)if(bR(bS[bU]))bT=true;else bU=bU+1;return bT;};k.concat=function(bR){return a.Array.prototype.concat.apply([],k.ofSeq(bR));};k.ofList=function(bR){var bS,bT;bT=[];bS=bR;while(!(bS.$==0)){bT.push(bc.head(bS));bS=bc.tail(bS);}return bT;};k.foldBack=function(bR,bS,bT){var bU,bV,bW,bX,bY;bU=bT;bW=bS.length;for(bX=1,bY=bW;bX<=bY;bX++)bU=bR(bS[bW-bX],bU);return bU;};k.iter=function(bR,bS){var bT,bU;for(bT=0,bU=bS.length-1;bT<=bU;bT++)bR(bS[bT]);};k.map=function(bR,bS){var bT,bU,bV;bT=new a.Array(bS.length);for(bU=0,bV=bS.length-1;bU<=bV;bU++)bT[bU]=bR(bS[bU]);return bT;};k.filter=function(bR,bS){var bT,bU,bV;bT=[];for(bU=0,bV=bS.length-1;bU<=bV;bU++)if(bR(bS[bU]))bT.push(bS[bU]);return bT;};k.ofSeq=function(bR){var bS,bT;if(bR instanceof a.Array)return bR.slice();else if(bR instanceof bd)return k.ofList(bR);else{bS=[];bT=J.Get(bR);try{while(bT.MoveNext())bS.push(bT.Current());return bS;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}}};k.pick=function(bR,bS){var bT;bT=k.tryPick(bR,bS);return bT==null?i.FailWith("KeyNotFoundException"):bT.$0;};k.forall=function(bR,bS){var bT,bU,bV,bW;bT=true;bU=0;bW=k.length(bS);while(bT&&bU<bW)if(bR(bS[bU]))bU=bU+1;else bT=false;return bT;};k.create=function(bR,bS){var bT,bU,bV;bT=new a.Array(bR);for(bU=0,bV=bR-1;bU<=bV;bU++)bT[bU]=bS;return bT;};k.init=function(bR,bS){var bT,bU,bV;if(bR<0)i.FailWith("Negative size given.");else null;bT=new a.Array(bR);for(bU=0,bV=bR-1;bU<=bV;bU++)bT[bU]=bS(bU);return bT;};N.$cctor=function(){N.$cctor=a.ignore;N.initialized=new L.New$5();};N=n.TemplateInitializer=bO.Class({},e,N);N.GetOrAddHoleFor=function(bR,bS,bT){var bU,bV,bW,bX;N.$cctor();bU=N.GetHolesFor(bR);bV=(bW=null,[bU.TryGetValue(bS,{get:function(){return bW;},set:function(bY){bW=bY;}}),bW]);return bV[0]?bV[1]:(bX=bT(),(bU.set_Item(bS,bX),bX));};N.GetHolesFor=function(bR){var bS,bT,bU;N.$cctor();bS=(bT=null,[N.initialized.TryGetValue(bR,{get:function(){return bT;},set:function(bV){bT=bV;}}),bT]);return bS[0]?bS[1]:(bU=new L.New$5(),(N.initialized.set_Item(bR,bU),bU));};O=f.Var$1=bO.Class({},e,O);O.Create$1=function(bR){return new _0.New(false,T.New({$:2,$0:bR,$1:[]}),bR);};R.GetFieldValues=function(bR){var bS,bT;bS=[];for(var bU in bR)bS.push(bR[bU]);return bS;};K=f.View=bO.Class({},null,K);S=f.Updates=bO.Class({},null,S);S.Create=function(bR){var bS;bS=null;bS=S.New(bR,null,function(){var bT;bT=bS.s;return bT===null?(bT=T.Copy(bS.c()),bS.s=bT,T.WhenObsoleteRun(bT,function(){bS.s=null;}),bT):bT;});return bS;};S.New=function(bR,bS,bT){return new S({c:bR,s:bS,v:bT});};T.WhenRun=function(bR,bS,bT){var bU;bU=bR.s;if(bU==null)bT();else bU!=null&&bU.$==2?(bU.$1.push(bT),bS(bU.$0)):bU!=null&&bU.$==3?(bU.$0.push(bS),bU.$1.push(bT)):bS(bU.$0);};T.Copy=function(bR){var bS,bT,bU;bS=bR.s;return bS==null?bR:bS!=null&&bS.$==2?(bT=T.New({$:2,$0:bS.$0,$1:[]}),(T.WhenObsolete(bR,bT),bT)):bS!=null&&bS.$==3?(bU=T.New({$:3,$0:[],$1:[]}),(T.When(bR,function(bV){T.MarkDone(bU,bR,bV);},bU),bU)):bR;};T.WhenObsoleteRun=function(bR,bS){var bT;bT=bR.s;if(bT==null)bS();else bT!=null&&bT.$==2?bT.$1.push(bS):bT!=null&&bT.$==3?bT.$1.push(bS):void 0;};T.Map2Unit=function(bR,bS){var bT,bU,bV;function bW(){var bX,bY,bZ;if(!(bX=bV.s,bX!=null&&bX.$==0||bX!=null&&bX.$==2)){bY=T.ValueAndForever(bR);bZ=T.ValueAndForever(bS);if(bY!=null&&bY.$==1)bZ!=null&&bZ.$==1?bY.$0[1]&&bZ.$0[1]?T.MarkForever(bV,null):T.MarkReady(bV,null):void 0;}}bT=bR.s;bU=bS.s;return bT!=null&&bT.$==0?bU!=null&&bU.$==0?T.New({$:0,$0:null}):bS:bU!=null&&bU.$==0?bR:(bV=T.New({$:3,$0:[],$1:[]}),(T.When(bR,bW,bV),T.When(bS,bW,bV),bV));};T.Map=function(bR,bS){var bT,bU;bT=bS.s;return bT!=null&&bT.$==0?T.New({$:0,$0:bR(bT.$0)}):(bU=T.New({$:3,$0:[],$1:[]}),(T.When(bS,function(bV){T.MarkDone(bU,bS,bR(bV));},bU),bU));};T.Map3=function(bR,bS,bT,bU){var bV,bW,bX,bY;function bZ(b0){var b1,b2,b3,b4;if(!(b1=bY.s,b1!=null&&b1.$==0||b1!=null&&b1.$==2)){b2=T.ValueAndForever(bS);b3=T.ValueAndForever(bT);b4=T.ValueAndForever(bU);if(b2!=null&&b2.$==1)b3!=null&&b3.$==1?b4!=null&&b4.$==1?b2.$0[1]&&b3.$0[1]&&b4.$0[1]?T.MarkForever(bY,bR(b2.$0[0],b3.$0[0],b4.$0[0])):T.MarkReady(bY,bR(b2.$0[0],b3.$0[0],b4.$0[0])):void 0:void 0;}}bV=bS.s;bW=bT.s;bX=bU.s;return bV!=null&&bV.$==0?bW!=null&&bW.$==0?bX!=null&&bX.$==0?T.New({$:0,$0:bR(bV.$0,bW.$0,bX.$0)}):T.Map3Opt1(bR,bV.$0,bW.$0,bU):bX!=null&&bX.$==0?T.Map3Opt2(bR,bV.$0,bX.$0,bT):T.Map3Opt3(bR,bV.$0,bT,bU):bW!=null&&bW.$==0?bX!=null&&bX.$==0?T.Map3Opt4(bR,bW.$0,bX.$0,bS):T.Map3Opt5(bR,bW.$0,bS,bU):bX!=null&&bX.$==0?T.Map3Opt6(bR,bX.$0,bS,bT):(bY=T.New({$:3,$0:[],$1:[]}),(T.When(bS,bZ,bY),T.When(bT,bZ,bY),T.When(bU,bZ,bY),bY));};T.Sequence=function(bR){var bS,bT,bU;function bV(bW){var bX;if(bU[0]===0){bX=k.map(function(bY){var bZ;bZ=bY.s;return bZ!=null&&bZ.$==0?bZ.$0:bZ!=null&&bZ.$==2?bZ.$0:i.FailWith("value not found by View.Sequence");},bS);if(k.forall(function(bY){var bZ;bZ=bY.s;return bZ!=null&&bZ.$==0;},bS))T.MarkForever(bT,bX);else T.MarkReady(bT,bX);}else bU[0]--;}bS=k.ofSeq(bR);return bS.length==0?T.New({$:0,$0:[]}):(bT=T.New({$:3,$0:[],$1:[]}),(bU=[k.length(bS)-1],(k.iter(function(bW){T.When(bW,bV,bT);},bS),bT)));};T.Map2=function(bR,bS,bT){var bU,bV,bW;function bX(bY){var bZ,b0,b1;if(!(bZ=bW.s,bZ!=null&&bZ.$==0||bZ!=null&&bZ.$==2)){b0=T.ValueAndForever(bS);b1=T.ValueAndForever(bT);if(b0!=null&&b0.$==1)b1!=null&&b1.$==1?b0.$0[1]&&b1.$0[1]?T.MarkForever(bW,bR(b0.$0[0],b1.$0[0])):T.MarkReady(bW,bR(b0.$0[0],b1.$0[0])):void 0;}}bU=bS.s;bV=bT.s;return bU!=null&&bU.$==0?bV!=null&&bV.$==0?T.New({$:0,$0:bR(bU.$0,bV.$0)}):T.Map2Opt1(bR,bU.$0,bT):bV!=null&&bV.$==0?T.Map2Opt2(bR,bV.$0,bS):(bW=T.New({$:3,$0:[],$1:[]}),(T.When(bS,bX,bW),T.When(bT,bX,bW),bW));};T.WhenObsolete=function(bR,bS){var bT;bT=bR.s;if(bT==null)T.Obsolete(bS);else bT!=null&&bT.$==2?T.EnqueueSafe(bT.$1,bS):bT!=null&&bT.$==3?T.EnqueueSafe(bT.$1,bS):void 0;};T.When=function(bR,bS,bT){var bU;bU=bR.s;if(bU==null)T.Obsolete(bT);else bU!=null&&bU.$==2?(T.EnqueueSafe(bU.$1,bT),bS(bU.$0)):bU!=null&&bU.$==3?(bU.$0.push(bS),T.EnqueueSafe(bU.$1,bT)):bS(bU.$0);};T.MarkDone=function(bR,bS,bT){var bU;if(bU=bS.s,bU!=null&&bU.$==0)T.MarkForever(bR,bT);else T.MarkReady(bR,bT);};T.ValueAndForever=function(bR){var bS;bS=bR.s;return bS!=null&&bS.$==0?{$:1,$0:[bS.$0,true]}:bS!=null&&bS.$==2?{$:1,$0:[bS.$0,false]}:null;};T.MarkForever=function(bR,bS){var bT,bU,bV,bW;bT=bR.s;if(bT!=null&&bT.$==3){bR.s={$:0,$0:bS};bU=bT.$0;for(bV=0,bW=k.length(bU)-1;bV<=bW;bV++)(k.get(bU,bV))(bS);}else void 0;};T.MarkReady=function(bR,bS){var bT,bU,bV,bW;bT=bR.s;if(bT!=null&&bT.$==3){bR.s={$:2,$0:bS,$1:bT.$1};bU=bT.$0;for(bV=0,bW=k.length(bU)-1;bV<=bW;bV++)(k.get(bU,bV))(bS);}else void 0;};T.Map3Opt1=function(bR,bS,bT,bU){return T.Map(function(bV){return bR(bS,bT,bV);},bU);};T.Map3Opt2=function(bR,bS,bT,bU){return T.Map(function(bV){return bR(bS,bV,bT);},bU);};T.Map3Opt3=function(bR,bS,bT,bU){return T.Map2(function(bV,bW){return bR(bS,bV,bW);},bT,bU);};T.Map3Opt4=function(bR,bS,bT,bU){return T.Map(function(bV){return bR(bV,bS,bT);},bU);};T.Map3Opt5=function(bR,bS,bT,bU){return T.Map2(function(bV,bW){return bR(bV,bS,bW);},bT,bU);};T.Map3Opt6=function(bR,bS,bT,bU){return T.Map2(function(bV,bW){return bR(bV,bW,bS);},bT,bU);};T.Map2Opt1=function(bR,bS,bT){return T.Map(function(bU){return bR(bS,bU);},bT);};T.Map2Opt2=function(bR,bS,bT){return T.Map(function(bU){return bR(bU,bS);},bT);};T.EnqueueSafe=function(bR,bS){var bT,bU,bV,bW;bR.push(bS);if(bR.length%20===0){bT=bR.slice(0);bJ.Clear(bR);for(bU=0,bV=k.length(bT)-1;bU<=bV;bU++){bW=k.get(bT,bU);if(typeof bW=="object")(function(bX){if(bX.s)bR.push(bX);}(bW));else(function(bX){bR.push(bX);}(bW));}}else void 0;};U.TryParseInt32=function(bR,bS){return U.TryParse(bR,-2147483648,2147483647,bS);};W=f.Var=bO.Class({},e,W);W.New=bO.Ctor(function(){e.New.call(this);},W);X=f.CheckedInput=bO.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,X);Y.notPresent=function(){return i.FailWith("The given key was not present in the dictionary.");};Z=J.T=bO.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},e,Z);Z.New=bO.Ctor(function(bR,bS,bT,bU){e.New.call(this);this.s=bR;this.c=bS;this.n=bT;this.d=bU;},Z);_0=f.ConcreteVar=bO.Class({get_View:function(){return this.view;},Get:function(){return this.current;},Set:function(bR){if(this.isConst)(function(bS){return bS("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bS){bP.log(bS);}));else{T.Obsolete(this.snap);this.current=bR;this.snap=T.New({$:2,$0:bR,$1:[]});}},UpdateMaybe:function(bR){var bS;bS=bR(this.Get());if(bS!=null&&bS.$==1)this.Set(bS.$0);}},W,_0);_0.New=bO.Ctor(function(bR,bS,bT){var bU;bU=this;W.New.call(this);this.isConst=bR;this.current=bT;this.snap=bS;this.view=function(){return bU.snap;};this.id=_8.Int();},_0);_1.$cctor=function(){_1.$cctor=a.ignore;_1.LoadedTemplates=new L.New$5();_1.LocalTemplatesLoaded=false;_1.GlobalHoles=new L.New$5();_1.TextHoleRE="\\${([^}]+)}";_1.RenderedFullDocTemplate=null;};_3.LinkElement=function(bR,bS){_3.InsertDoc(bR,bS,null);};_3.InsertDoc=function(bR,bS,bT){var bU,bV,bW;while(true)if(bS!=null&&bS.$==1)return _3.InsertNode(bR,bS.$0.El,bT);else if(bS!=null&&bS.$==2){bU=bS.$0;bU.Dirty=false;bS=bU.Current;}else if(bS==null)return bT;else if(bS!=null&&bS.$==4)return _3.InsertNode(bR,bS.$0.Text,bT);else if(bS!=null&&bS.$==5)return _3.InsertNode(bR,bS.$0,bT);else if(bS!=null&&bS.$==6)return k.foldBack(function(bX,bY){return(((bO.Curried3(function(bZ,b0,b1){return b0==null||b0.constructor===V?_3.InsertDoc(bZ,b0,b1):_3.InsertNode(bZ,b0,b1);}))(bR))(bX))(bY);},bS.$0.Els,bT);else{bV=bS.$1;bW=bS.$0;bS=bW;bT=_3.InsertDoc(bR,bV,bT);}};_3.CreateRunState=function(bR,bS){return bi.New(bj.get_Empty(),_3.CreateElemNode(bR,H.EmptyAttr(),bS));};_3.PerformAnimatedUpdate=function(bR,bS,bT){var bU;return $.get_UseAnimations()?(bU=null,bk.Delay(function(){var bV,bW,bX;bV=bj.FindAll(bT);bW=_3.ComputeChangeAnim(bS,bV);bX=_3.ComputeEnterAnim(bS,bV);return bk.Bind($.Play($.Append(bW,_3.ComputeExitAnim(bS,bV))),function(){return bk.Bind(_3.SyncElemNodesNextFrame(bR,bS),function(){return bk.Bind($.Play(bX),function(){bS.PreviousNodes=bV;return bk.Return(null);});});});})):_3.SyncElemNodesNextFrame(bR,bS);};_3.PerformSyncUpdate=function(bR,bS,bT){var bU;bU=bj.FindAll(bT);_3.SyncElemNode(bR,bS.Top);bS.PreviousNodes=bU;};_3.CreateElemNode=function(bR,bS,bT){var bU;_3.LinkElement(bR,bT);bU=H.Insert(bR,bS);return _5.New(bU,bT,null,bR,_8.Int(),bO.GetOptional(bU.OnAfterRender));};_3.InsertBeforeDelim=function(bR,bS){var bT,bU;bT=bR.parentNode;bU=self.document.createTextNode("");bT.insertBefore(bU,bR);_3.LinkPrevElement(bR,bS);return bU;};_3.InsertNode=function(bR,bS,bT){I.InsertAt(bR,bT,bS);return bS;};_3.SyncElemNodesNextFrame=function(bR,bS){function bT(bU){a.requestAnimationFrame(function(){_3.SyncElemNode(bR,bS.Top);bU();});}return ba.BatchUpdatesEnabled()?bk.FromContinuations(function(bU,bV,bW){return bT.apply(null,[bU,bV,bW]);}):(_3.SyncElemNode(bR,bS.Top),bk.Return(null));};_3.ComputeExitAnim=function(bR,bS){return $.Concat(k.map(function(bT){return H.GetExitAnim(bT.Attr);},bj.ToArray(bj.Except(bS,bj.Filter(function(bT){return H.HasExitAnim(bT.Attr);},bR.PreviousNodes)))));};_3.ComputeEnterAnim=function(bR,bS){return $.Concat(k.map(function(bT){return H.GetEnterAnim(bT.Attr);},bj.ToArray(bj.Except(bR.PreviousNodes,bj.Filter(function(bT){return H.HasEnterAnim(bT.Attr);},bS)))));};_3.ComputeChangeAnim=function(bR,bS){var bT;function bU(bV){return H.HasChangeAnim(bV.Attr);}bT=function(bV){return bj.Filter(bU,bV);};return $.Concat(k.map(function(bV){return H.GetChangeAnim(bV.Attr);},bj.ToArray(bj.Intersect(bT(bR.PreviousNodes),bT(bS)))));};_3.SyncElemNode=function(bR,bS){!bR?_3.SyncElement(bS):void 0;_3.Sync(bS.Children);_3.AfterRender(bS);};_3.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};_3.UpdateTextNode=function(bR,bS){bR.Value=bS;bR.Dirty=true;};_3.LinkPrevElement=function(bR,bS){_3.InsertDoc(bR.parentNode,bS,bR);};_3.SyncElement=function(bR){function bS(bT){function bU(bV){var bW,bX,bY,bZ;while(true){if(bV!=null&&bV.$==0){bX=bV.$1;bY=bV.$0;if(bU(bY))return true;else bV=bX;}else if(bV!=null&&bV.$==2){bZ=bV.$0;if(bZ.Dirty)return true;else bV=bZ.Current;}else return bV!=null&&bV.$==6&&(bW=bV.$0,bW.Dirty||k.exists(bS,bW.Holes));}}return bU(bT.Children);}H.Sync(bR.El,bR.Attr);if(bS(bR))_3.DoSyncElement(bR);};_3.Sync=function(bR){var bS,bT,bU,bV,bW;while(true){if(bR!=null&&bR.$==1)return _3.SyncElemNode(false,bR.$0);else if(bR!=null&&bR.$==2){bU=bR.$0;bR=bU.Current;}else if(bR==null)return null;else if(bR!=null&&bR.$==5)return null;else if(bR!=null&&bR.$==4){bS=bR.$0;return bS.Dirty?(bS.Text.nodeValue=bS.Value,bS.Dirty=false):null;}else if(bR!=null&&bR.$==6){bT=bR.$0;k.iter(function(bX){return function(bY){_3.SyncElemNode(bX,bY);};}(false),bT.Holes);k.iter(function(bX){H.Sync(bX[0],bX[1]);},bT.Attrs);return _3.AfterRender(bT);}else{bV=bR.$1;bW=bR.$0;_3.Sync(bW);bR=bV;}}};_3.AfterRender=function(bR){var bS;bS=bO.GetOptional(bR.Render);if(bS!=null&&bS.$==1){bS.$0(bR.El);bO.SetOptional(bR,"Render",null);}};_3.DoSyncElement=function(bR){var bS,bT,bU;function bV(bW,bX){var bY,bZ,b0,b1;while(true){if(bW!=null&&bW.$==1)return bW.$0.El;else if(bW!=null&&bW.$==2){bZ=bW.$0;if(bZ.Dirty){bZ.Dirty=false;return _3.InsertDoc(bS,bZ.Current,bX);}else bW=bZ.Current;}else if(bW==null)return bX;else if(bW!=null&&bW.$==4)return bW.$0.Text;else if(bW!=null&&bW.$==5)return bW.$0;else if(bW!=null&&bW.$==6){bY=bW.$0;bY.Dirty?bY.Dirty=false:void 0;return k.foldBack(function(b2,b3){return b2==null||b2.constructor===V?bV(b2,b3):b2;},bY.Els,bX);}else{b0=bW.$1;b1=bW.$0;bW=b1;bX=bV(b0,bX);}}}bS=bR.El;bE.Iter((bT=bR.El,function(bW){I.RemoveNode(bT,bW);}),bE.Except(bE.DocChildren(bR),bE.Children(bR.El,bO.GetOptional(bR.Delimiters))));bV(bR.Children,(bU=bO.GetOptional(bR.Delimiters),bU!=null&&bU.$==1?bU.$0[1]:null));};_4.ofSeqNonCopying=function(bR){var bS,bT;if(bR instanceof a.Array)return bR;else if(bR instanceof bd)return k.ofList(bR);else if(bR===null)return[];else{bS=[];bT=J.Get(bR);try{while(bT.MoveNext())bS.push(bT.Current());return bS;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}}};_4.TreeReduce=function(bR,bS,bT){var bU;function bV(bW){return function(bX){var bY,bZ;return bX<=0?bR:bX===1&&(bW>=0&&bW<bU)?k.get(bT,bW):(bZ=bX/2>>0,bS((bV(bW))(bZ),(bV(bW+bZ))(bX-bZ)));};}bU=k.length(bT);return(bV(0))(bU);};_4.MapTreeReduce=function(bR,bS,bT,bU){var bV;function bW(bX){return function(bY){var bZ,b0;return bY<=0?bS:bY===1&&(bX>=0&&bX<bV)?bR(k.get(bU,bX)):(b0=bY/2>>0,bT((bW(bX))(b0),(bW(bX+b0))(bY-b0)));};}bV=k.length(bU);return(bW(0))(bV);};T.Obsolete=function(bR){var bS,bT,bU,bV,bW;bT=bR.s;if(bT==null||(bT!=null&&bT.$==2?(bS=bT.$1,false):bT!=null&&bT.$==3?(bS=bT.$1,false):true))void 0;else{bR.s=null;for(bU=0,bV=k.length(bS)-1;bU<=bV;bU++){bW=k.get(bS,bU);if(typeof bW=="object")(function(bX){T.Obsolete(bX);}(bW));else bW();}}};T.New=function(bR){return{s:bR};};_5=f.DocElemNode=bO.Class({Equals:function(bR){return this.ElKey===bR.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_5);_5.New=function(bR,bS,bT,bU,bV,bW){var bX;return new _5((bX={Attr:bR,Children:bS,El:bU,ElKey:bV},(bO.SetOptional(bX,"Delimiters",bT),bO.SetOptional(bX,"Render",bW),bX)));};_8.Int=function(){_8.set_counter(_8.counter()+1);return _8.counter();};_8.set_counter=function(bR){bp.$cctor();bp.counter=bR;};_8.counter=function(){bp.$cctor();return bp.counter;};_9.convertTextNode=function(bR){var bS,bT,bU,bV,bW,bX;bS=null;bT=0;bV=bR.textContent;bW=new a.RegExp(G.TextHoleRE(),"g");while(bS=bW.exec(bV),bS!==null){bR.parentNode.insertBefore(self.document.createTextNode(s.string(bV,{$:1,$0:bT},{$:1,$0:bW.lastIndex-k.get(bS,0).length-1})),bR);bT=bW.lastIndex;bX=self.document.createElement("span");bX.setAttribute("ws-replace",k.get(bS,1).toLowerCase());bR.parentNode.insertBefore(bX,bR);}bW.lastIndex=0;bR.textContent=s.string(bV,{$:1,$0:bT},null);};_9.failNotLoaded=function(bR){bP.warn("Instantiating non-loaded template",bR);};_9.fillTextHole=function(bR,bS,bT){var bU;bU=bR.querySelector("[ws-replace]");return q.Equals(bU,null)?(bP.warn("Filling non-existent text hole",bT),null):(bU.parentNode.replaceChild(self.document.createTextNode(bS),bU),{$:1,$0:bU.getAttribute("ws-replace")});};_9.removeHolesExcept=function(bR,bS){function bT(bU){G.foreachNotPreserved(bR,"["+bU+"]",function(bV){if(!bS.Contains(bV.getAttribute(bU)))bV.removeAttribute(bU);});}bT("ws-attr");bT("ws-onafterrender");bT("ws-var");G.foreachNotPreserved(bR,"[ws-hole]",function(bU){if(!bS.Contains(bU.getAttribute("ws-hole"))){bU.removeAttribute("ws-hole");while(bU.hasChildNodes())bU.removeChild(bU.lastChild);}});G.foreachNotPreserved(bR,"[ws-replace]",function(bU){if(!bS.Contains(bU.getAttribute("ws-replace")))bU.parentNode.removeChild(bU);});G.foreachNotPreserved(bR,"[ws-on]",function(bU){bU.setAttribute("ws-on",j.concat(" ",k.filter(function(bV){return bS.Contains(k.get(j.SplitChars(bV,[":"],1),1));},j.SplitChars(bU.getAttribute("ws-on"),[" "],1))));});G.foreachNotPreserved(bR,"[ws-attr-holes]",function(bU){var bV,bW,bX,bY,bZ;bV=j.SplitChars(bU.getAttribute("ws-attr-holes"),[" "],1);for(bW=0,bX=bV.length-1;bW<=bX;bW++){bY=k.get(bV,bW);bU.setAttribute(bY,(bZ=new a.RegExp(G.TextHoleRE(),"g"),bU.getAttribute(bY).replace(bZ,function(b0,b1){return bS.Contains(b1)?b0:"";})));}});};_9.fillInstanceAttrs=function(bR,bS){var bT,bU,bV,bW,bX;_9.convertAttrs(bS);bT=bS.nodeName.toLowerCase();bU=bR.querySelector("[ws-attr="+bT+"]");if(q.Equals(bU,null))bP.warn("Filling non-existent attr hole",bT);else{bU.removeAttribute("ws-attr");for(bV=0,bW=bS.attributes.length-1;bV<=bW;bV++){bX=bS.attributes.item(bV);if(bX.name==="class"&&bU.hasAttribute("class"))bU.setAttribute("class",bU.getAttribute("class")+" "+bX.nodeValue);else bU.setAttribute(bX.name,bX.nodeValue);}}};_9.mapHoles=function(bR,bS){function bT(bU){G.foreachNotPreserved(bR,"["+bU+"]",function(bV){var bW,bX;bW=(bX=null,[bS.TryGetValue(bV.getAttribute(bU).toLowerCase(),{get:function(){return bX;},set:function(bY){bX=bY;}}),bX]);if(bW[0])bV.setAttribute(bU,bW[1]);});}bT("ws-hole");bT("ws-replace");bT("ws-attr");bT("ws-onafterrender");bT("ws-var");G.foreachNotPreserved(bR,"[ws-on]",function(bU){bU.setAttribute("ws-on",j.concat(" ",k.map(function(bV){var bW,bX,bY;bW=j.SplitChars(bV,[":"],1);bX=(bY=null,[bS.TryGetValue(k.get(bW,1),{get:function(){return bY;},set:function(bZ){bY=bZ;}}),bY]);return bX[0]?k.get(bW,0)+":"+bX[1]:bV;},j.SplitChars(bU.getAttribute("ws-on"),[" "],1))));});G.foreachNotPreserved(bR,"[ws-attr-holes]",function(bU){var bV,bW,bX;bV=j.SplitChars(bU.getAttribute("ws-attr-holes"),[" "],1);for(bW=0,bX=bV.length-1;bW<=bX;bW++)(function(){var bY;function bZ(b0,b1){var b2;b2=i.KeyValue(b1);return b0.replace(new a.RegExp("\\${"+b2[0]+"}","ig"),"${"+b2[1]+"}");}bY=k.get(bV,bW);return bU.setAttribute(bY,(((bO.Curried3(u.fold))(bZ))(bU.getAttribute(bY)))(bS));}());});};_9.fill=function(bR,bS,bT){while(true)if(bR.hasChildNodes())bT=bS.insertBefore(bR.lastChild,bT);else return null;};_9.convertAttrs=function(bR){var bT,bU,bV,bW,bX,bY,bZ,b0;function bS(b1){var b2;b2=bR.getAttribute(b1);if(b2===null);else bR.setAttribute(b1,b2.toLowerCase());}bT=bR.attributes;bU=[];bV=[];bW=[];for(bX=0,bY=bT.length-1;bX<=bY;bX++){bZ=bT.item(bX);if(j.StartsWith(bZ.nodeName,"ws-on")&&bZ.nodeName!=="ws-onafterrender"&&bZ.nodeName!=="ws-on"){bU.push(bZ.nodeName);bV.push(s.string(bZ.nodeName,{$:1,$0:"ws-on".length},null)+":"+bZ.nodeValue.toLowerCase());}else!j.StartsWith(bZ.nodeName,"ws-")&&(new a.RegExp(G.TextHoleRE())).test(bZ.nodeValue)?(bZ.nodeValue=(b0=new a.RegExp(G.TextHoleRE(),"g"),bZ.nodeValue.replace(b0,function(b1,b2){return"${"+b2.toLowerCase()+"}";})),bW.push(bZ.nodeName)):void 0;}if(!(bV.length==0))bR.setAttribute("ws-on",j.concat(" ",bV));if(!(bW.length==0))bR.setAttribute("ws-attr-holes",j.concat(" ",bW));bS("ws-hole");bS("ws-replace");bS("ws-attr");bS("ws-onafterrender");bS("ws-var");k.iter(function(b1){bR.removeAttribute(b1);},bU);};u.insufficient=function(){return i.FailWith("The input sequence has an insufficient number of elements.");};_=C.KeyCollection=bO.Class({GetEnumerator$1:function(){return J.Get(u.map(function(bR){return bR.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},e,_);_.New=bO.Ctor(function(bR){e.New.call(this);this.d=bR;},_);$.get_UseAnimations=function(){return bl.UseAnimations();};$.Play=function(bR){var bS;bS=null;return bk.Delay(function(){return bk.Bind($.Run(a.ignore,bl.Actions(bR)),function(){bl.Finalize(bR);return bk.Return(null);});});};$.Append=function(bR,bS){return{$:0,$0:bt.Append(bR.$0,bS.$0)};};$.Run=function(bR,bS){var bT;function bU(bV){function bW(bX){return function(bY){var bZ;bZ=bY-bX;bS.Compute(bZ);bR();return bZ<=bT?void a.requestAnimationFrame(function(b0){(bW(bX))(b0);}):bV();};}a.requestAnimationFrame(function(bX){(bW(bX))(bX);});}bT=bS.Duration;return bT===0?bk.Zero():bk.FromContinuations(function(bV,bW,bX){return bU.apply(null,[bV,bW,bX]);});};$.Concat=function(bR){return{$:0,$0:bt.Concat(u.map(bl.List,bR))};};$.get_Empty=function(){return{$:0,$0:bt.Empty()};};ba.BatchUpdatesEnabled=function(){bm.$cctor();return bm.BatchUpdatesEnabled;};bb.StartProcessor=function(bR){var bS;function bT(){var bU;bU=null;return bk.Delay(function(){return bk.Bind(bR,function(){var bV;bV=bS[0];return q.Equals(bV,1)?(bS[0]=0,bk.Zero()):q.Equals(bV,2)?(bS[0]=1,bT()):bk.Zero();});});}bS=[0];return function(){var bU;bU=bS[0];if(q.Equals(bU,0)){bS[0]=1;bk.Start(bT(),null);}else q.Equals(bU,1)?bS[0]=2:void 0;};};bd=bc.T=bO.Class({GetEnumerator:function(){return new Z.New(this,null,function(bR){var bS;bS=bR.s;return bS.$==0?false:(bR.c=bS.$0,bR.s=bS.$1,true);},void 0);},GetEnumerator0:function(){return J.Get(this);}},null,bd);bd.Empty=new bd({$:0});bf.New=function(bR,bS,bT,bU){var bV;bV={DynElem:bR,DynFlags:bS,DynNodes:bT};bO.SetOptional(bV,"OnAfterRender",bU);return bV;};bg=C.ValueCollection=bO.Class({GetEnumerator$1:function(){return J.Get(u.map(function(bR){return bR.V;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},e,bg);bg.New=bO.Ctor(function(bR){e.New.call(this);this.d=bR;},bg);bi.New=function(bR,bS){return{PreviousNodes:bR,Top:bS};};bj.get_Empty=function(){return{$:0,$0:new M.New$3()};};bj.FindAll=function(bR){var bS;function bT(bW,bX){var bY,bZ,b0,b1,b2;while(true)switch(bW){case 0:if(bX!=null&&bX.$==0){bZ=bX.$1;b0=bX.$0;bT(0,b0);bX=bZ;}else if(bX!=null&&bX.$==1){b1=bX.$0;bX=b1;bW=1;}else if(bX!=null&&bX.$==2){b2=bX.$0;bX=b2.Current;}else return bX!=null&&bX.$==6?(bY=bX.$0.Holes,(function(b3){return function(b4){k.iter(b3,b4);};}(bV))(bY)):null;break;case 1:bS.push(bX);bX=bX.Children;bW=0;break;}}function bU(bW){return bT(0,bW);}function bV(bW){return bT(1,bW);}bS=[];bU(bR);return{$:0,$0:new M.New$2(bS)};};bj.Filter=function(bR,bS){return{$:0,$0:bB.Filter(bR,bS.$0)};};bj.Except=function(bR,bS){return{$:0,$0:bB.Except(bR.$0,bS.$0)};};bj.ToArray=function(bR){return bB.ToArray(bR.$0);};bj.Intersect=function(bR,bS){return{$:0,$0:bB.Intersect(bR.$0,bS.$0)};};bk.Delay=function(bR){return function(bS){try{(bR(null))(bS);}catch(bT){bS.k({$:1,$0:bT});}};};bk.Bind=function(bR,bS){return bk.checkCancel(function(bT){bR(by.New(function(bU){var bV;if(bU.$==0){bV=bU.$0;bk.scheduler().Fork(function(){try{(bS(bV))(bT);}catch(bW){bT.k({$:1,$0:bW});}});}else bk.scheduler().Fork(function(){bT.k(bU);});},bT.ct));});};bk.Zero=function(){bz.$cctor();return bz.Zero;};bk.Start=function(bR,bS){var bT,bU;bT=(bU=(bk.defCTS())[0],bS==null?bU:bS.$0);bk.scheduler().Fork(function(){if(!bT.c)bR(by.New(function(bV){if(bV.$==1)bk.UncaughtAsyncError(bV.$0);},bT));});};bk.Return=function(bR){return function(bS){bS.k({$:0,$0:bR});};};bk.scheduler=function(){bz.$cctor();return bz.scheduler;};bk.checkCancel=function(bR){return function(bS){if(bS.ct.c)bk.cancel(bS);else bR(bS);};};bk.defCTS=function(){bz.$cctor();return bz.defCTS;};bk.UncaughtAsyncError=function(bR){bP.log("WebSharper: Uncaught asynchronous exception",bR);};bk.FromContinuations=function(bR){return function(bS){var bT;function bU(bV){if(bT[0])i.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bT[0]=true;bk.scheduler().Fork(bV);}}bT=[false];bR(function(bV){bU(function(){bS.k({$:0,$0:bV});});},function(bV){bU(function(){bS.k({$:1,$0:bV});});},function(bV){bU(function(){bS.k({$:2,$0:bV});});});};};bk.cancel=function(bR){bR.k({$:2,$0:new bG.New(bR.ct)});};bl.UseAnimations=function(){bs.$cctor();return bs.UseAnimations;};bl.Actions=function(bR){return bl.ConcatActions(k.choose(function(bS){return bS.$==1?{$:1,$0:bS.$0}:null;},bt.ToArray(bR.$0)));};bl.Finalize=function(bR){k.iter(function(bS){if(bS.$==0)bS.$0();},bt.ToArray(bR.$0));};bl.ConcatActions=function(bR){var bS,bT,bU,bV;bS=_4.ofSeqNonCopying(bR);bT=k.length(bS);return bT===0?bl.Const():bT===1?k.get(bS,0):(bU=u.max(u.map(function(bW){return bW.Duration;},bS)),(bV=k.map(function(bW){return bl.Prolong(bU,bW);},bS),bl.Def(bU,function(bW){k.iter(function(bX){bX.Compute(bW);},bV);})));};bl.List=function(bR){return bR.$0;};bl.Const=function(bR){return bl.Def(0,function(){return bR;});};bl.Def=function(bR,bS){return{Compute:bS,Duration:bR};};bl.Prolong=function(bR,bS){var bT,bU,bV;bT=bS.Compute;bU=bS.Duration;bV=bH.Create(function(){return bS.Compute(bS.Duration);});return{Compute:function(bW){return bW>=bU?bV.f():bT(bW);},Duration:bR};};bm.$cctor=function(){bm.$cctor=a.ignore;bm.BatchUpdatesEnabled=true;};bn.concat=function(bR){var bS,bT;bS=[];for(var bU in bR)bS.push.apply(bS,bR[bU]);return bS;};bc.head=function(bR){return bR.$==1?bR.$0:bc.listEmpty();};bc.tail=function(bR){return bR.$==1?bR.$1:bc.listEmpty();};bc.listEmpty=function(){return i.FailWith("The input list was empty.");};bo.$cctor=function(){var bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0;bo.$cctor=a.ignore;bo.EmptyAttr=null;bo.BoolCheckedApply=function(b1){function b2(b3,b4){return b4!=null&&b4.$==1?void(b3.checked=b4.$0):null;}return[function(b3){b3.addEventListener("change",function(){return!q.Equals(b1.Get(),b3.checked)?b1.Set(b3.checked):null;});},function(b3){return function(b4){return b2(b3,b4);};},K.Map(function(b3){return{$:1,$0:b3};},b1.get_View())];};bo.StringSet=function(b1){return function(b2){b1.value=b2;};};bo.StringGet=function(b1){return{$:1,$0:b1.value};};bo.StringApply=(bR=bq.StringGet(),(bS=bq.StringSet(),function(b1){return bq.ApplyValue(bR,bS,b1);}));bo.IntSetUnchecked=function(b1){return function(b2){b1.value=a.String(b2);};};bo.IntGetUnchecked=function(b1){var b2,b3;b2=b1.value;return bu.isBlank(b2)?{$:1,$0:0}:(b3=+b2,b3!==b3>>0?null:{$:1,$0:b3});};bo.IntApplyUnchecked=(bT=bq.IntGetUnchecked(),(bU=bq.IntSetUnchecked(),function(b1){return bq.ApplyValue(bT,bU,b1);}));bo.IntSetChecked=function(b1){return function(b2){var b3;b3=b2.get_Input();return b1.value!==b3?void(b1.value=b3):null;};};bo.IntGetChecked=function(b1){var b2,b3,b4;b2=b1.value;return{$:1,$0:bu.isBlank(b2)?(b1.checkValidity?b1.checkValidity():true)?new X({$:2,$0:b2}):new X({$:1,$0:b2}):(b3=(b4=0,[U.TryParseInt32(b2,{get:function(){return b4;},set:function(b5){b4=b5;}}),b4]),b3[0]?new X({$:0,$0:b3[1],$1:b2}):new X({$:1,$0:b2}))};};bo.IntApplyChecked=(bV=bq.IntGetChecked(),(bW=bq.IntSetChecked(),function(b1){return bq.ApplyValue(bV,bW,b1);}));bo.FloatSetUnchecked=function(b1){return function(b2){b1.value=a.String(b2);};};bo.FloatGetUnchecked=function(b1){var b2,b3;b2=b1.value;return bu.isBlank(b2)?{$:1,$0:0}:(b3=+b2,a.isNaN(b3)?null:{$:1,$0:b3});};bo.FloatApplyUnchecked=(bX=bq.FloatGetUnchecked(),(bY=bq.FloatSetUnchecked(),function(b1){return bq.ApplyValue(bX,bY,b1);}));bo.FloatSetChecked=function(b1){return function(b2){var b3;b3=b2.get_Input();return b1.value!==b3?void(b1.value=b3):null;};};bo.FloatGetChecked=function(b1){var b2,b3;b2=b1.value;return{$:1,$0:bu.isBlank(b2)?(b1.checkValidity?b1.checkValidity():true)?new X({$:2,$0:b2}):new X({$:1,$0:b2}):(b3=+b2,a.isNaN(b3)?new X({$:1,$0:b2}):new X({$:0,$0:b3,$1:b2}))};};bo.FloatApplyChecked=(bZ=bq.FloatGetChecked(),(b0=bq.FloatSetChecked(),function(b1){return bq.ApplyValue(bZ,b0,b1);}));};bp.$cctor=function(){bp.$cctor=a.ignore;bp.counter=0;};bq.StringApply=function(){bo.$cctor();return bo.StringApply;};bq.BoolCheckedApply=function(){bo.$cctor();return bo.BoolCheckedApply;};bq.IntApplyChecked=function(){bo.$cctor();return bo.IntApplyChecked;};bq.IntApplyUnchecked=function(){bo.$cctor();return bo.IntApplyUnchecked;};bq.FloatApplyChecked=function(){bo.$cctor();return bo.FloatApplyChecked;};bq.FloatApplyUnchecked=function(){bo.$cctor();return bo.FloatApplyUnchecked;};bq.ApplyValue=function(bR,bS,bT){var bU;function bV(bW,bX){return bX==null?null:bW(bX.$0);}bU=null;return[function(bW){function bX(){bT.UpdateMaybe(function(bY){var bZ;bU=bR(bW);return bU!=null&&bU.$==1&&(!q.Equals(bU.$0,bY)&&(bZ=[bU,bU.$0],true))?bZ[0]:null;});}bW.addEventListener("change",bX);bW.addEventListener("input",bX);bW.addEventListener("keypress",bX);},function(bW){var bX;bX=bS(bW);return function(bY){return bV(bX,bY);};},K.Map(function(bW){var bX;return bU!=null&&bU.$==1&&(q.Equals(bU.$0,bW)&&(bX=bU.$0,true))?null:{$:1,$0:bW};},bT.get_View())];};bq.StringSet=function(){bo.$cctor();return bo.StringSet;};bq.StringGet=function(){bo.$cctor();return bo.StringGet;};bq.IntSetUnchecked=function(){bo.$cctor();return bo.IntSetUnchecked;};bq.IntGetUnchecked=function(){bo.$cctor();return bo.IntGetUnchecked;};bq.IntSetChecked=function(){bo.$cctor();return bo.IntSetChecked;};bq.IntGetChecked=function(){bo.$cctor();return bo.IntGetChecked;};bq.FloatSetUnchecked=function(){bo.$cctor();return bo.FloatSetUnchecked;};bq.FloatGetUnchecked=function(){bo.$cctor();return bo.FloatGetUnchecked;};bq.FloatSetChecked=function(){bo.$cctor();return bo.FloatSetChecked;};bq.FloatGetChecked=function(){bo.$cctor();return bo.FloatGetChecked;};br.$cctor=function(){var bR;br.$cctor=a.ignore;br.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");br.rtagName=new a.RegExp("<([\\w:]+)");br.rhtml=new a.RegExp("<|&#?\\w+;");br.wrapMap=(bR=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:bR,tbody:bR,tfoot:bR,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});br.defaultWrap=[0,"",""];};bs.$cctor=function(){bs.$cctor=a.ignore;bs.CubicInOut=bx.Custom(function(bR){var bS;bS=bR*bR;return 3*bS-2*(bS*bR);});bs.UseAnimations=true;};bt.Append=function(bR,bS){return bR.$==0?bS:bS.$==0?bR:{$:2,$0:bR,$1:bS};};bt.ToArray=function(bR){var bS;function bT(bU){var bV,bW;while(true)if(bU.$==1)return bS.push(bU.$0);else if(bU.$==2){bV=bU.$1;bW=bU.$0;bT(bW);bU=bV;}else return bU.$==3?k.iter(function(bX){bS.push(bX);},bU.$0):null;}bS=[];bT(bR);return bS.slice(0);};bt.Concat=function(bR){var bS;bS=_4.ofSeqNonCopying(bR);return _4.TreeReduce(bt.Empty(),bt.Append,bS);};bt.Empty=function(){bI.$cctor();return bI.Empty;};bu.isBlank=function(bR){return j.forall(bC.IsWhiteSpace,bR);};bv=f.DynamicAttrNode=bO.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bR){return $.get_Empty();},NGetEnterAnim:function(bR){return $.get_Empty();},NGetChangeAnim:function(bR){return $.get_Empty();},NSync:function(bR){if(this.dirty){(this.push(bR))(this.value);this.dirty=false;}}},e,bv);bv.New=bO.Ctor(function(bR,bS){var bT;bT=this;e.New.call(this);this.push=bS;this.value=void 0;this.dirty=false;this.updates=K.Map(function(bU){bT.value=bU;bT.dirty=true;},bR);},bv);bw=bk.Scheduler=bO.Class({Fork:function(bR){var bS;bS=this;this.robin.push(bR);if(this.idle){this.idle=false;a.setTimeout(function(){bS.tick();},0);}},tick:function(){var bR,bS,bT;bS=this;bT=bQ.now();bR=true;while(bR)if(this.robin.length===0){this.idle=true;bR=false;}else{(this.robin.shift())();bQ.now()-bT>40?(a.setTimeout(function(){bS.tick();},0),bR=false):void 0;}}},e,bw);bw.New=bO.Ctor(function(){e.New.call(this);this.idle=true;this.robin=[];},bw);bx=f.Easing=bO.Class({},e,bx);bx.Custom=function(bR){return new bx.New(bR);};bx.New=bO.Ctor(function(bR){e.New.call(this);this.transformTime=bR;},bx);by.New=function(bR,bS){return{k:bR,ct:bS};};bz.$cctor=function(){bz.$cctor=a.ignore;bz.noneCT=bA.New(false,[]);bz.scheduler=new bw.New();bz.defCTS=[new bD.New()];bz.Zero=bk.Return();bz.GetCT=function(bR){bR.k({$:0,$0:bR.ct});};};bA.New=function(bR,bS){return{c:bR,r:bS};};bB.Filter=function(bR,bS){return new M.New$2(k.filter(bR,bB.ToArray(bS)));};bB.Except=function(bR,bS){var bT;bT=new M.New$2(bB.ToArray(bS));bT.ExceptWith(bB.ToArray(bR));return bT;};bB.ToArray=function(bR){var bS;bS=k.create(bR.get_Count(),void 0);bR.CopyTo(bS);return bS;};bB.Intersect=function(bR,bS){var bT;bT=new M.New$2(bB.ToArray(bR));bT.IntersectWith(bB.ToArray(bS));return bT;};bC.IsWhiteSpace=function(bR){return bR.match(new a.RegExp("\\s"))!==null;};U.TryParse=function(bR,bS,bT,bU){var bV,bW;bV=+bR;bW=bV===bV-bV%1&&bV>=bS&&bV<=bT;if(bW)bU.set(bV);return bW;};bD=d.CancellationTokenSource=bO.Class({},e,bD);bD.New=bO.Ctor(function(){e.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bD);bE.Children=function(bR,bS){var bT,bU,bV;if(bS!=null&&bS.$==1){bV=[];bT=bS.$0[0].nextSibling;while(bT!==bS.$0[1]){bV.push(bT);bT=bT.nextSibling;}return{$:0,$0:bV};}else return{$:0,$0:k.init(bR.childNodes.length,(bU=bR.childNodes,function(bW){return bU[bW];}))};};bE.Except=function(bR,bS){var bT;bT=bR.$0;return{$:0,$0:k.filter(function(bU){return k.forall(function(bV){return!(bU===bV);},bT);},bS.$0)};};bE.Iter=function(bR,bS){k.iter(bR,bS.$0);};bE.DocChildren=function(bR){var bS;function bT(bU){var bV,bW,bX,bY;while(true){if(bU!=null&&bU.$==2){bW=bU.$0;bU=bW.Current;}else if(bU!=null&&bU.$==1)return bS.push(bU.$0.El);else if(bU==null)return null;else if(bU!=null&&bU.$==5)return bS.push(bU.$0);else if(bU!=null&&bU.$==4)return bS.push(bU.$0.Text);else if(bU!=null&&bU.$==6){bV=bU.$0.Els;return(function(bZ){return function(b0){k.iter(bZ,b0);};}(function(bZ){if(bZ==null||bZ.constructor===V)bT(bZ);else bS.push(bZ);}))(bV);}else{bX=bU.$1;bY=bU.$0;bT(bY);bU=bX;}}}bS=[];bT(bR.Children);return{$:0,$0:_4.ofSeqNonCopying(bS)};};bG=d.OperationCanceledException=bO.Class({},bF,bG);bG.New=bO.Ctor(function(bR){bG.New$1.call(this,"The operation was canceled.",null,bR);},bG);bG.New$1=bO.Ctor(function(bR,bS,bT){this.message=bR;this.inner=bS;V.setPrototypeOf(this,bG.prototype);this.ct=bT;},bG);bH.Create=function(bR){return bL.New(false,bR,bH.forceLazy);};bH.forceLazy=function(){var bR;bR=this.v();this.c=true;this.v=bR;this.f=bH.cachedLazy;return bR;};bH.cachedLazy=function(){return this.v;};bI.$cctor=function(){bI.$cctor=a.ignore;bI.Empty={$:0};};bJ.Clear=function(bR){bR.splice(0,k.length(bR));};bL.New=function(bR,bS,bT){return{c:bR,v:bS,f:bT};};bO.OnLoad(function(){c.Main();});}(self));


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
